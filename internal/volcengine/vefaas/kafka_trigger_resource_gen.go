// Copyright (c) HashiCorp, Inc.
// SPDX-License-Identifier: MPL-2.0

// Code generated by generators/resource/main.go; DO NOT EDIT.

package vefaas

import (
	"context"

	"github.com/hashicorp/terraform-plugin-framework-validators/int64validator"
	"github.com/hashicorp/terraform-plugin-framework-validators/stringvalidator"
	"github.com/hashicorp/terraform-plugin-framework/resource"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/boolplanmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/int64default"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/int64planmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/objectplanmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/planmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/stringplanmodifier"
	"github.com/hashicorp/terraform-plugin-framework/schema/validator"
	"github.com/volcengine/terraform-provider-volcenginecc/internal/generic"
	"github.com/volcengine/terraform-provider-volcenginecc/internal/registry"
)

func init() {
	registry.AddResourceFactory("volcenginecc_vefaas_kafka_trigger", kafkaTriggerResource)
}

// kafkaTriggerResource returns the Terraform volcenginecc_vefaas_kafka_trigger resource.
// This Terraform resource corresponds to the Cloud Control Volcengine::VEFAAS::KafkaTrigger resource.
func kafkaTriggerResource(ctx context.Context) (resource.Resource, error) {
	attributes := map[string]schema.Attribute{ /*START SCHEMA*/
		// Property: BatchFlushDurationMilliseconds
		// Cloud Control resource type schema:
		//
		//	{
		//	  "default": 1000,
		//	  "description": "触发器批量消费的最长等待时间。单位为毫秒（ms），取值范围为 1000 ~ 60000 ms，默认值为 1000 ms。",
		//	  "maximum": 60000,
		//	  "type": "integer"
		//	}
		"batch_flush_duration_milliseconds": schema.Int64Attribute{ /*START ATTRIBUTE*/
			Description: "触发器批量消费的最长等待时间。单位为毫秒（ms），取值范围为 1000 ~ 60000 ms，默认值为 1000 ms。",
			Optional:    true,
			Computed:    true,
			Default:     int64default.StaticInt64(1000),
			Validators: []validator.Int64{ /*START VALIDATORS*/
				int64validator.AtMost(60000),
			}, /*END VALIDATORS*/
			PlanModifiers: []planmodifier.Int64{ /*START PLAN MODIFIERS*/
				int64planmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: BatchSize
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "触发器批量消费的每批次消息数。",
		//	  "type": "integer"
		//	}
		"batch_size": schema.Int64Attribute{ /*START ATTRIBUTE*/
			Description: "触发器批量消费的每批次消息数。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.Int64{ /*START PLAN MODIFIERS*/
				int64planmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: ConsumerGroup
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "消息队列 Kafka 实例的消费组名字。",
		//	  "type": "string"
		//	}
		"consumer_group": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "消息队列 Kafka 实例的消费组名字。",
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: CreatedTime
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "Kafka 触发器创建时间。",
		//	  "type": "string"
		//	}
		"created_time": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "Kafka 触发器创建时间。",
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: Description
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "Kafka 触发器描述。长度限制为 200 个字符以内。",
		//	  "maxLength": 200,
		//	  "type": "string"
		//	}
		"description": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "Kafka 触发器描述。长度限制为 200 个字符以内。",
			Optional:    true,
			Computed:    true,
			Validators: []validator.String{ /*START VALIDATORS*/
				stringvalidator.LengthAtMost(200),
			}, /*END VALIDATORS*/
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: Enabled
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "是否在创建触发器的同时启用触发器。取值：true：启用。false：关闭。",
		//	  "type": "boolean"
		//	}
		"enabled": schema.BoolAttribute{ /*START ATTRIBUTE*/
			Description: "是否在创建触发器的同时启用触发器。取值：true：启用。false：关闭。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.Bool{ /*START PLAN MODIFIERS*/
				boolplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: FunctionId
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "函数 ID。",
		//	  "type": "string"
		//	}
		"function_id": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "函数 ID。",
			Required:    true,
		}, /*END ATTRIBUTE*/
		// Property: KafkaCredentials
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "Kafka 身份认证。函数服务将通过 Kafka ACL 权限策略，对 PLAIN 和 SCRAM-SHA-256 两种类型的 SASL 用户进行消息消费鉴权。",
		//	  "properties": {
		//	    "Mechanism": {
		//	      "description": "Kafka 认证机制。取值：PLAIN，SCRAM-SHA-256。",
		//	      "enum": [
		//	        "PLAIN",
		//	        "SCRAM-SHA-256"
		//	      ],
		//	      "type": "string"
		//	    },
		//	    "Password": {
		//	      "description": "创建 Kafka 实例时设置的 SASL/PLAIN 用户密码。",
		//	      "type": "string"
		//	    },
		//	    "Username": {
		//	      "description": "创建 Kafka 实例时设置的 SASL/PLAIN 用户名称。",
		//	      "type": "string"
		//	    }
		//	  },
		//	  "required": [
		//	    "Mechanism",
		//	    "Password",
		//	    "Username"
		//	  ],
		//	  "type": "object"
		//	}
		"kafka_credentials": schema.SingleNestedAttribute{ /*START ATTRIBUTE*/
			Attributes: map[string]schema.Attribute{ /*START SCHEMA*/
				// Property: Mechanism
				"mechanism": schema.StringAttribute{ /*START ATTRIBUTE*/
					Description: "Kafka 认证机制。取值：PLAIN，SCRAM-SHA-256。",
					Required:    true,
					Validators: []validator.String{ /*START VALIDATORS*/
						stringvalidator.OneOf(
							"PLAIN",
							"SCRAM-SHA-256",
						),
					}, /*END VALIDATORS*/
				}, /*END ATTRIBUTE*/
				// Property: Password
				"password": schema.StringAttribute{ /*START ATTRIBUTE*/
					Description: "创建 Kafka 实例时设置的 SASL/PLAIN 用户密码。",
					Required:    true,
				}, /*END ATTRIBUTE*/
				// Property: Username
				"username": schema.StringAttribute{ /*START ATTRIBUTE*/
					Description: "创建 Kafka 实例时设置的 SASL/PLAIN 用户名称。",
					Required:    true,
				}, /*END ATTRIBUTE*/
			}, /*END SCHEMA*/
			Description: "Kafka 身份认证。函数服务将通过 Kafka ACL 权限策略，对 PLAIN 和 SCRAM-SHA-256 两种类型的 SASL 用户进行消息消费鉴权。",
			Required:    true,
			PlanModifiers: []planmodifier.Object{ /*START PLAN MODIFIERS*/
				objectplanmodifier.RequiresReplace(),
			}, /*END PLAN MODIFIERS*/
			// KafkaCredentials is a write-only property.
		}, /*END ATTRIBUTE*/
		// Property: KafkaTriggerId
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "Kafka 触发器 ID。",
		//	  "type": "string"
		//	}
		"kafka_trigger_id": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "Kafka 触发器 ID。",
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: MaximumRetryAttempts
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "函数发生运行错误（包括用户代码错误和 Runtime 错误）时的最大重试次数。取值范围为 0～100 的正整数。",
		//	  "maximum": 100,
		//	  "type": "integer"
		//	}
		"maximum_retry_attempts": schema.Int64Attribute{ /*START ATTRIBUTE*/
			Description: "函数发生运行错误（包括用户代码错误和 Runtime 错误）时的最大重试次数。取值范围为 0～100 的正整数。",
			Optional:    true,
			Computed:    true,
			Validators: []validator.Int64{ /*START VALIDATORS*/
				int64validator.AtMost(100),
			}, /*END VALIDATORS*/
			PlanModifiers: []planmodifier.Int64{ /*START PLAN MODIFIERS*/
				int64planmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: MqInstanceId
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "消息队列 Kafka 实例 ID。",
		//	  "type": "string"
		//	}
		"mq_instance_id": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "消息队列 Kafka 实例 ID。",
			Required:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.RequiresReplace(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: Name
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "Kafka 触发器名字。同一函数下，触发器名称不可重复。只能包含大小写字母、数字、下划线，并且以字母开头，长度限制为 4~63 个字符。",
		//	  "maxLength": 63,
		//	  "minLength": 4,
		//	  "type": "string"
		//	}
		"name": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "Kafka 触发器名字。同一函数下，触发器名称不可重复。只能包含大小写字母、数字、下划线，并且以字母开头，长度限制为 4~63 个字符。",
			Required:    true,
			Validators: []validator.String{ /*START VALIDATORS*/
				stringvalidator.LengthBetween(4, 63),
			}, /*END VALIDATORS*/
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.RequiresReplace(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: StartingPosition
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "指定开始消费 Topic 中消息的位置。取值：Latest：只消费订阅 Topic 后产生的消息。Earliest：从 Topic 中生产的第一条消息开始消费。",
		//	  "enum": [
		//	    "Latest",
		//	    "Earliest"
		//	  ],
		//	  "type": "string"
		//	}
		"starting_position": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "指定开始消费 Topic 中消息的位置。取值：Latest：只消费订阅 Topic 后产生的消息。Earliest：从 Topic 中生产的第一条消息开始消费。",
			Optional:    true,
			Computed:    true,
			Validators: []validator.String{ /*START VALIDATORS*/
				stringvalidator.OneOf(
					"Latest",
					"Earliest",
				),
			}, /*END VALIDATORS*/
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
				stringplanmodifier.RequiresReplaceIfConfigured(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: Status
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "Kafka 触发器状态。参数值说明：ready：运行，failed：失败，pending：启动中",
		//	  "type": "string"
		//	}
		"status": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "Kafka 触发器状态。参数值说明：ready：运行，failed：失败，pending：启动中",
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: TopicName
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "消息队列 Kafka 实例的 Topic 名称。",
		//	  "type": "string"
		//	}
		"topic_name": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "消息队列 Kafka 实例的 Topic 名称。",
			Required:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.RequiresReplace(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: UpdatedTime
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "Kafka 触发器最近一次更新时间。",
		//	  "type": "string"
		//	}
		"updated_time": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "Kafka 触发器最近一次更新时间。",
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
	} /*END SCHEMA*/

	// Corresponds to Cloud Control primaryIdentifier.
	attributes["id"] = schema.StringAttribute{
		Description: "Uniquely identifies the resource.",
		Computed:    true,
		PlanModifiers: []planmodifier.String{
			stringplanmodifier.UseStateForUnknown(),
		},
	}

	schema := schema.Schema{
		Description: "函数服务支持对接消息队列 Kafka 版。通过创建 Kafka 触发器，函数服务将作为消费者消费 Kafka 中的消息，并将消息传递给用户函数，触发函数代码逻辑。您无需关心函数服务消费消息的细节，只需编写处理消息的函数。",
		Version:     1,
		Attributes:  attributes,
	}

	var opts generic.ResourceOptions

	opts = opts.WithCloudControlTypeName("Volcengine::VEFAAS::KafkaTrigger").WithTerraformTypeName("volcenginecc_vefaas_kafka_trigger")
	opts = opts.WithTerraformSchema(schema)
	opts = opts.WithAttributeNameMap(map[string]string{
		"batch_flush_duration_milliseconds": "BatchFlushDurationMilliseconds",
		"batch_size":                        "BatchSize",
		"consumer_group":                    "ConsumerGroup",
		"created_time":                      "CreatedTime",
		"description":                       "Description",
		"enabled":                           "Enabled",
		"function_id":                       "FunctionId",
		"kafka_credentials":                 "KafkaCredentials",
		"kafka_trigger_id":                  "KafkaTriggerId",
		"maximum_retry_attempts":            "MaximumRetryAttempts",
		"mechanism":                         "Mechanism",
		"mq_instance_id":                    "MqInstanceId",
		"name":                              "Name",
		"password":                          "Password",
		"starting_position":                 "StartingPosition",
		"status":                            "Status",
		"topic_name":                        "TopicName",
		"updated_time":                      "UpdatedTime",
		"username":                          "Username",
	})

	opts = opts.WithWriteOnlyPropertyPaths([]string{
		"/properties/KafkaCredentials",
	})

	opts = opts.WithReadOnlyPropertyPaths([]string{
		"/properties/KafkaTriggerId",
		"/properties/ConsumerGroup",
		"/properties/CreatedTime",
		"/properties/UpdatedTime",
		"/properties/Status",
	})

	opts = opts.WithCreateOnlyPropertyPaths([]string{
		"/properties/KafkaCredentials",
		"/properties/MqInstanceId",
		"/properties/Name",
		"/properties/StartingPosition",
		"/properties/TopicName",
	})
	opts = opts.WithCreateTimeoutInMinutes(0).WithDeleteTimeoutInMinutes(0)

	opts = opts.WithUpdateTimeoutInMinutes(0)

	v, err := generic.NewResource(ctx, opts...)

	if err != nil {
		return nil, err
	}

	return v, nil
}
