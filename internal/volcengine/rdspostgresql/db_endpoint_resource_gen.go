// Copyright (c) HashiCorp, Inc.
// SPDX-License-Identifier: MPL-2.0

// Code generated by generators/resource/main.go; DO NOT EDIT.

package rdspostgresql

import (
	"context"

	"github.com/hashicorp/terraform-plugin-framework/resource"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/boolplanmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/int64planmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/planmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/setplanmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/stringplanmodifier"
	"github.com/volcengine/terraform-provider-volcenginecc/internal/generic"
	"github.com/volcengine/terraform-provider-volcenginecc/internal/registry"
)

func init() {
	registry.AddResourceFactory("volcenginecc_rdspostgresql_db_endpoint", dBEndpointResource)
}

// dBEndpointResource returns the Terraform volcenginecc_rdspostgresql_db_endpoint resource.
// This Terraform resource corresponds to the Cloud Control Volcengine::RDSPostgreSQL::DBEndpoint resource.
func dBEndpointResource(ctx context.Context) (resource.Resource, error) {
	attributes := map[string]schema.Attribute{ /*START SCHEMA*/
		// Property: Addresses
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "地址列表。",
		//	  "insertionOrder": false,
		//	  "items": {
		//	    "description": "连接终端地址。",
		//	    "properties": {
		//	      "CrossRegionDomain": {
		//	        "description": "可跨地域访问的私网地址。说明无此地址时则不返回该字段。",
		//	        "type": "string"
		//	      },
		//	      "DNSVisibility": {
		//	        "description": "是否开启公网解析。取值为：false：默认值，私网解析。true：私网以及公网解析。",
		//	        "type": "boolean"
		//	      },
		//	      "Domain": {
		//	        "description": "连接域名。",
		//	        "type": "string"
		//	      },
		//	      "DomainPrefix": {
		//	        "description": "新的访问地址前缀。访问地址前缀应满足以下规则：由小写字母、数字和中划线（-）组成。至少包含 8 个字符，总长度（含后缀）不得超过 63 个字符。以小写字母开头，以小写字母或数字结尾。",
		//	        "type": "string"
		//	      },
		//	      "DomainVisibilitySetting": {
		//	        "description": "私网地址类型。取值：LocalDomain：本地域域名。CrossRegionDomain：可跨地域访问域名。",
		//	        "type": "string"
		//	      },
		//	      "EipId": {
		//	        "description": "EIP 的 ID，仅对 Public 地址有效。",
		//	        "type": "string"
		//	      },
		//	      "IPAddress": {
		//	        "description": "IP 地址。",
		//	        "type": "string"
		//	      },
		//	      "NetworkType": {
		//	        "description": "网络地址类型，取值为：Private：私网连接地址。Public：公网连接地址。Inner：公共服务区地址。",
		//	        "type": "string"
		//	      },
		//	      "Port": {
		//	        "description": "端口号。",
		//	        "type": "string"
		//	      },
		//	      "SubnetId": {
		//	        "description": "子网 ID。",
		//	        "type": "string"
		//	      }
		//	    },
		//	    "type": "object"
		//	  },
		//	  "type": "array",
		//	  "uniqueItems": true
		//	}
		"addresses": schema.SetNestedAttribute{ /*START ATTRIBUTE*/
			NestedObject: schema.NestedAttributeObject{ /*START NESTED OBJECT*/
				Attributes: map[string]schema.Attribute{ /*START SCHEMA*/
					// Property: CrossRegionDomain
					// Property: DNSVisibility
					"dns_visibility": schema.BoolAttribute{ /*START ATTRIBUTE*/
						Description: "是否开启公网解析。取值为：false：默认值，私网解析。true：私网以及公网解析。",
						Optional:    true,
						Computed:    true,
						PlanModifiers: []planmodifier.Bool{ /*START PLAN MODIFIERS*/
							boolplanmodifier.UseStateForUnknown(),
						}, /*END PLAN MODIFIERS*/
					}, /*END ATTRIBUTE*/
					// Property: Domain
					// Property: DomainPrefix
					"domain_prefix": schema.StringAttribute{ /*START ATTRIBUTE*/
						Description: "新的访问地址前缀。访问地址前缀应满足以下规则：由小写字母、数字和中划线（-）组成。至少包含 8 个字符，总长度（含后缀）不得超过 63 个字符。以小写字母开头，以小写字母或数字结尾。",
						Optional:    true,
						Computed:    true,
						PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
							stringplanmodifier.UseStateForUnknown(),
						}, /*END PLAN MODIFIERS*/
						// DomainPrefix is a write-only property.
					}, /*END ATTRIBUTE*/
					// Property: DomainVisibilitySetting
					// Property: EipId
					// Property: IPAddress
					// Property: NetworkType
					// Property: Port
					"port": schema.StringAttribute{ /*START ATTRIBUTE*/
						Description: "端口号。",
						Optional:    true,
						Computed:    true,
						PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
							stringplanmodifier.UseStateForUnknown(),
						}, /*END PLAN MODIFIERS*/
					}, /*END ATTRIBUTE*/
					// Property: SubnetId
				}, /*END SCHEMA*/
			}, /*END NESTED OBJECT*/
			Description: "地址列表。\n 特别提示: 在使用 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.Set{ /*START PLAN MODIFIERS*/
				setplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: AutoAddNewNodes
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "当终端类型为读写终端或只读终端时，支持设置新节点是否自动加入。取值：Enable：自动加入。Disable：不自动加入（默认）。",
		//	  "type": "string"
		//	}
		"auto_add_new_nodes": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "当终端类型为读写终端或只读终端时，支持设置新节点是否自动加入。取值：Enable：自动加入。Disable：不自动加入（默认）。",
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: Description
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "地址描述。",
		//	  "type": "string"
		//	}
		"description": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "地址描述。",
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: EnableReadOnly
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "是否已开启全局只读。Enable：开启。Disable：未开启。",
		//	  "type": "string"
		//	}
		"enable_read_only": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "是否已开启全局只读。Enable：开启。Disable：未开启。",
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: EnableReadWriteSplitting
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "是否已开启读写分离，取值：Enable：开启。Disable：未开启。",
		//	  "type": "string"
		//	}
		"enable_read_write_splitting": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "是否已开启读写分离，取值：Enable：开启。Disable：未开启。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: EndpointId
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "实例连接终端 ID。",
		//	  "type": "string"
		//	}
		"endpoint_id": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "实例连接终端 ID。",
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: EndpointName
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "实例连接终端名称。",
		//	  "type": "string"
		//	}
		"endpoint_name": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "实例连接终端名称。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: EndpointType
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "终端类型：Cluster：默认终端（默认创建）。Custom：自定义终端。",
		//	  "type": "string"
		//	}
		"endpoint_type": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "终端类型：Cluster：默认终端（默认创建）。Custom：自定义终端。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
				stringplanmodifier.RequiresReplaceIfConfigured(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: InstanceId
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "实例 ID。",
		//	  "type": "string"
		//	}
		"instance_id": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "实例 ID。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
				stringplanmodifier.RequiresReplaceIfConfigured(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: Nodes
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "连接终端配置的节点列表。说明当 EndpointType 为 Custom 时必选。主节点无需传节点 ID，传入 Primary 字符串即可。",
		//	  "type": "string"
		//	}
		"nodes": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "连接终端配置的节点列表。说明当 EndpointType 为 Custom 时必选。主节点无需传节点 ID，传入 Primary 字符串即可。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
				stringplanmodifier.RequiresReplaceIfConfigured(),
			}, /*END PLAN MODIFIERS*/
			// Nodes is a write-only property.
		}, /*END ATTRIBUTE*/
		// Property: ReadOnlyNodeDistributionType
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "只读权重分配模式。取值：Default：标准权重分配（默认值）。Custom：自定义权重分配。",
		//	  "type": "string"
		//	}
		"read_only_node_distribution_type": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "只读权重分配模式。取值：Default：标准权重分配（默认值）。Custom：自定义权重分配。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: ReadOnlyNodeMaxDelayTime
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "只读节点的最大延迟阈值，当只读节点延迟时间超过该值时，读取流量不发往该节点，单位：秒。取值：0~3600。默认值：30。说明支持对开通了读写分离的默认终端设置此参数。",
		//	  "format": "int32",
		//	  "type": "integer"
		//	}
		"read_only_node_max_delay_time": schema.Int64Attribute{ /*START ATTRIBUTE*/
			Description: "只读节点的最大延迟阈值，当只读节点延迟时间超过该值时，读取流量不发往该节点，单位：秒。取值：0~3600。默认值：30。说明支持对开通了读写分离的默认终端设置此参数。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.Int64{ /*START PLAN MODIFIERS*/
				int64planmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: ReadOnlyNodeWeights
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "连接终端配置的节点列表及对应的只读权重。",
		//	  "insertionOrder": false,
		//	  "items": {
		//	    "description": "只读节点权重。",
		//	    "properties": {
		//	      "NodeId": {
		//	        "description": "只读节点需要传入 NodeId。",
		//	        "type": "string"
		//	      },
		//	      "NodeType": {
		//	        "description": "节点类型。取值：Primary：主节点。ReadOnly：只读节点。",
		//	        "type": "string"
		//	      },
		//	      "Weight": {
		//	        "description": "节点的读权重，以 100 递增，最大值为 40000。说明权重不可全部设置为 0。",
		//	        "format": "int32",
		//	        "type": "integer"
		//	      }
		//	    },
		//	    "type": "object"
		//	  },
		//	  "type": "array",
		//	  "uniqueItems": true
		//	}
		"read_only_node_weights": schema.SetNestedAttribute{ /*START ATTRIBUTE*/
			NestedObject: schema.NestedAttributeObject{ /*START NESTED OBJECT*/
				Attributes: map[string]schema.Attribute{ /*START SCHEMA*/
					// Property: NodeId
					"node_id": schema.StringAttribute{ /*START ATTRIBUTE*/
						Description: "只读节点需要传入 NodeId。",
						Optional:    true,
						Computed:    true,
						PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
							stringplanmodifier.UseStateForUnknown(),
						}, /*END PLAN MODIFIERS*/
					}, /*END ATTRIBUTE*/
					// Property: NodeType
					"node_type": schema.StringAttribute{ /*START ATTRIBUTE*/
						Description: "节点类型。取值：Primary：主节点。ReadOnly：只读节点。",
						Optional:    true,
						Computed:    true,
						PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
							stringplanmodifier.UseStateForUnknown(),
						}, /*END PLAN MODIFIERS*/
					}, /*END ATTRIBUTE*/
					// Property: Weight
					"weight": schema.Int64Attribute{ /*START ATTRIBUTE*/
						Description: "节点的读权重，以 100 递增，最大值为 40000。说明权重不可全部设置为 0。",
						Optional:    true,
						Computed:    true,
						PlanModifiers: []planmodifier.Int64{ /*START PLAN MODIFIERS*/
							int64planmodifier.UseStateForUnknown(),
						}, /*END PLAN MODIFIERS*/
					}, /*END ATTRIBUTE*/
				}, /*END SCHEMA*/
			}, /*END NESTED OBJECT*/
			Description: "连接终端配置的节点列表及对应的只读权重。\n 特别提示: 在使用 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.Set{ /*START PLAN MODIFIERS*/
				setplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: ReadWriteMode
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "读写模式：ReadWrite：读写。ReadOnly：只读。",
		//	  "type": "string"
		//	}
		"read_write_mode": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "读写模式：ReadWrite：读写。ReadOnly：只读。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
				stringplanmodifier.RequiresReplaceIfConfigured(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: ReadWriteProxyConnection
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "终端开启读写分离后，为终端设置的代理连接数。代理连接数的取值下限为 20。代理连接数的取值上限取决于实例主节点的规格，不同规格支持的代理连接数上限不同，详细信息请参见产品规格。",
		//	  "format": "int32",
		//	  "type": "integer"
		//	}
		"read_write_proxy_connection": schema.Int64Attribute{ /*START ATTRIBUTE*/
			Description: "终端开启读写分离后，为终端设置的代理连接数。代理连接数的取值下限为 20。代理连接数的取值上限取决于实例主节点的规格，不同规格支持的代理连接数上限不同，详细信息请参见产品规格。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.Int64{ /*START PLAN MODIFIERS*/
				int64planmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: WriteNodeHaltWriting
		// Cloud Control resource type schema:
		//
		//	{
		//	  "description": "终端是否将写请求发送给写节点（目前仅主节点为写节点）。取值：true：是。默认值。false：否。",
		//	  "type": "boolean"
		//	}
		"write_node_halt_writing": schema.BoolAttribute{ /*START ATTRIBUTE*/
			Description: "终端是否将写请求发送给写节点（目前仅主节点为写节点）。取值：true：是。默认值。false：否。",
			Optional:    true,
			Computed:    true,
			PlanModifiers: []planmodifier.Bool{ /*START PLAN MODIFIERS*/
				boolplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
	} /*END SCHEMA*/

	// Corresponds to Cloud Control primaryIdentifier.
	attributes["id"] = schema.StringAttribute{
		Description: "Uniquely identifies the resource.",
		Computed:    true,
		PlanModifiers: []planmodifier.String{
			stringplanmodifier.UseStateForUnknown(),
		},
	}

	schema := schema.Schema{
		Description: "连接终端是位于数据库和应用程序之间的网络代理服务，用于代理应用程序访问数据库时的所有请求，具有高可用、高性能、可运维、简单易用等特点，支持读写分离和负载均衡等高级功能。云数据库 PostgreSQL 版提供了默认终端和自定义只读终端两种类型。",
		Version:     1,
		Attributes:  attributes,
	}

	var opts generic.ResourceOptions

	opts = opts.WithCloudControlTypeName("Volcengine::RDSPostgreSQL::DBEndpoint").WithTerraformTypeName("volcenginecc_rdspostgresql_db_endpoint")
	opts = opts.WithTerraformSchema(schema)
	opts = opts.WithAttributeNameMap(map[string]string{
		"addresses":                        "Addresses",
		"auto_add_new_nodes":               "AutoAddNewNodes",
		"cross_region_domain":              "CrossRegionDomain",
		"description":                      "Description",
		"dns_visibility":                   "DNSVisibility",
		"domain":                           "Domain",
		"domain_prefix":                    "DomainPrefix",
		"domain_visibility_setting":        "DomainVisibilitySetting",
		"eip_id":                           "EipId",
		"enable_read_only":                 "EnableReadOnly",
		"enable_read_write_splitting":      "EnableReadWriteSplitting",
		"endpoint_id":                      "EndpointId",
		"endpoint_name":                    "EndpointName",
		"endpoint_type":                    "EndpointType",
		"instance_id":                      "InstanceId",
		"ip_address":                       "IPAddress",
		"network_type":                     "NetworkType",
		"node_id":                          "NodeId",
		"node_type":                        "NodeType",
		"nodes":                            "Nodes",
		"port":                             "Port",
		"read_only_node_distribution_type": "ReadOnlyNodeDistributionType",
		"read_only_node_max_delay_time":    "ReadOnlyNodeMaxDelayTime",
		"read_only_node_weights":           "ReadOnlyNodeWeights",
		"read_write_mode":                  "ReadWriteMode",
		"read_write_proxy_connection":      "ReadWriteProxyConnection",
		"subnet_id":                        "SubnetId",
		"weight":                           "Weight",
		"write_node_halt_writing":          "WriteNodeHaltWriting",
	})

	opts = opts.WithWriteOnlyPropertyPaths([]string{
		"/properties/Nodes",
		"/properties/Addresses/*/DomainPrefix",
	})

	opts = opts.WithReadOnlyPropertyPaths([]string{
		"/properties/Addresses/*/CrossRegionDomain",
		"/properties/Addresses/*/Domain",
		"/properties/Addresses/*/DomainVisibilitySetting",
		"/properties/Addresses/*/EipId",
		"/properties/Addresses/*/IPAddress",
		"/properties/Addresses/*/NetworkType",
		"/properties/Addresses/*/SubnetId",
		"/properties/AutoAddNewNodes",
		"/properties/Description",
		"/properties/EnableReadOnly",
		"/properties/EndpointId",
	})

	opts = opts.WithCreateOnlyPropertyPaths([]string{
		"/properties/EndpointType",
		"/properties/InstanceId",
		"/properties/Nodes",
		"/properties/ReadWriteMode",
	})
	opts = opts.WithCreateTimeoutInMinutes(0).WithDeleteTimeoutInMinutes(0)

	opts = opts.WithUpdateTimeoutInMinutes(0)

	v, err := generic.NewResource(ctx, opts...)

	if err != nil {
		return nil, err
	}

	return v, nil
}
