{
  "additionalProperties": false,
  "createOnlyProperties": [
    "/properties/ProjectName"
  ],
  "definitions": {
    "Condition": {
      "properties": {
        "ComparisonOperator": {
          "description": "比较符号。支持普通阈值告警： \u003e、\u003e=、\u003c、\u003c=、!=、= ，以及以下同环比告警：last_period_increase_pct：环比上周期上涨。last_period_decrease_pct：环比上周起下降。last_period_abs_pct：环比上周期上涨或下降。last_day_increase_pct：同比昨天同一时段上涨。last_day_decrease_pct：同比昨天同一时段下降。last_day_abs_pct：同比昨天同一时段上涨或下降。last_week_increase_pct：同比上周同一时段上涨。last_week_decrease_pct：同比上周同一时段下降。last_week_abs_pct：同比上周同一时段上涨或下降。",
          "type": "string"
        },
        "DisplayName": {
          "description": "指标显示名称。",
          "type": "string"
        },
        "MetricName": {
          "description": "监控指标的名称。详情请参见 云监控指标查询 下各产品的 MetricName。",
          "type": "string"
        },
        "MetricUnit": {
          "description": "监控指标的单位。详情请参见 云监控指标查询 下各产品的 MetricUnit。说明同环比告警，MetricUnit 需要填写为 \"Percent\"。MetricUnit 中是否带有 IEC 表示不同的进位：带有 IEC：进位是 1024不带 IEC：进位是 1000。",
          "type": "string"
        },
        "Period": {
          "description": "监控指标的统计周期。详情请参见 云监控指标查询 下各产品的 Period。",
          "type": "string"
        },
        "Statistics": {
          "description": "统计方法，取值：avg：平均值。max：最大值。min：最小值。说明统计方法会应用到检测时间段内的数据上。例如，默认每次检测数据的时间跨度是 1 分钟，如果统计方法为 avg，那就是对 1 分钟内的数据取平均值。",
          "type": "string"
        },
        "Threshold": {
          "description": "指标阈值。支持输入正数或 0。最多支持三位小数。",
          "type": "string"
        }
      },
      "type": "object"
    },
    "DimensionConditions": {
      "properties": {
        "MetaCondition": {
          "$ref": "#/definitions/MetaCondition",
          "description": "根据资源名称选择告警对象的条件。当Type为meta时必填。",
          "type": "object"
        },
        "ProjectCondition": {
          "$ref": "#/definitions/ProjectCondition",
          "description": "根据项目选择告警对象的条件。当Type为project时必填。",
          "type": "object"
        },
        "TagCondition": {
          "$ref": "#/definitions/TagCondition",
          "description": "根据标签选择告警对象的条件。当Type为tag时必填。",
          "type": "object"
        },
        "Type": {
          "description": "Dimensions 类型。取值：project：根据项目选择告警对象。tag：根据标签选择告警对象。meta：根据资源名称选择告警对象。",
          "type": "string"
        }
      },
      "type": "object"
    },
    "KVComparator": {
      "properties": {
        "Comparator": {
          "description": "标签匹配时的比较符。contain：包含not_contain：不包含prefix_match：前缀匹配suffix_match：后缀匹配equal：等于not_equal：不等于exist：存在。",
          "type": "string"
        },
        "Key": {
          "description": "标签键。",
          "type": "string"
        },
        "Values": {
          "description": "标签的值（Value）。当Comparator为exist时，包含 Key 对应的所有 Value，不支持输入。当Comparator为equal或not_equal时，支持输入多个 Value。当Comparator为contain、not_contain、prefix_match或suffix_match时，仅支持输入 1 个 Value。",
          "insertionOrder": false,
          "items": {
            "type": "string"
          },
          "type": "array",
          "uniqueItems": true
        }
      },
      "type": "object"
    },
    "LevelCondition": {
      "properties": {
        "Conditions": {
          "description": "告警分级配置。",
          "items": {
            "$ref": "#/definitions/Condition"
          },
          "type": "array"
        },
        "Level": {
          "description": "告警通知等级，取值：notice：通知warning：警告critical：严重recovery：恢复。",
          "type": "string"
        }
      },
      "type": "object"
    },
    "MetaCondition": {
      "properties": {
        "AllDimensions": {
          "description": "是否为全量资源。true：全部资源。false：部分资源。",
          "type": "boolean"
        },
        "Condition": {
          "description": "判断条件。and：全部满足。or：任意满足。",
          "type": "string"
        },
        "Metas": {
          "description": "判断条件。and：全部满足。or：任意满足。",
          "items": {
            "$ref": "#/definitions/KVComparator"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "NoData": {
      "properties": {
        "Enable": {
          "description": "是否开启无数据告警。取值：true：开启无数据告警。false：（默认）关闭无数据告警。",
          "type": "boolean"
        },
        "EvaluationCount": {
          "description": "无数据告警触发阈值，如果在配置的阈值周期内检测无数据上报，则会触发无数据告警。当Enable配置为true时，该字段为必填。整数形式，取值范围为 3～20。",
          "type": "integer"
        }
      },
      "type": "object"
    },
    "NotifyTemplate": {
      "properties": {
        "Channel": {
          "description": "通知渠道，取值：email：邮箱sms：短信phone：电话lark：飞书dingtalk：钉钉wecom：企业微信slack：Slackapi：回调地址。",
          "type": "string"
        },
        "NotifyTemplateId": {
          "description": "通知模版 ID。注意每种通知渠道仅支持配置 1 个通知模版 ID。",
          "type": "string"
        }
      },
      "type": "object"
    },
    "OriginalDimensions": {
      "description": "告警资源。",
      "properties": {
        "Key": {
          "description": "指标 Dimension 名称，例如ResourceID、NodeName等。不同云产品的 Dimensions 名称不同，详情请参见 云监控指标查询。ResourceID为必填项，且大小写必须与 云监控指标查询 中的一致。支持同时填写多个 Dimension 名称，并基于多个 Dimension 名称进行分组。举例如下：当您仅填写ResourceID时，系统会按照ResourceID进行告警分组。当您同时填写ResourceID和NodeName时，系统会首先按照ResourceID进行告警分组。然后在每个分组内，再按照NodeName进行分组。",
          "type": "string"
        },
        "Values": {
          "description": "指标 Dimension 值，数组形式。多个值之间使用英文半角逗号,分割。允许使用通配符*选择全部实例的值。例如：[\"*\"] 。",
          "insertionOrder": false,
          "items": {
            "type": "string"
          },
          "type": "array",
          "uniqueItems": true
        }
      },
      "type": "object"
    },
    "ProjectCondition": {
      "properties": {
        "Projects": {
          "description": "项目名称列表。数组形式。多个值之间使用英文半角逗号,分割。",
          "insertionOrder": false,
          "items": {
            "type": "string"
          },
          "type": "array",
          "uniqueItems": true
        }
      },
      "type": "object"
    },
    "RecoveryNotify": {
      "properties": {
        "Enable": {
          "description": "是否开启告警恢复通知。取值：true：（默认）开启告警恢复通知。false：关闭告警恢复通知。",
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "Tag": {
      "description": "标签键值对对象。",
      "properties": {
        "Key": {
          "description": "标签键。支持中文、英文大写字母、英文小写字母、数字和空格。支持以下特殊字符_.:/=+-@。不能以空格为开头或结尾。volc:和/sys:为系统预留的标签键，添加标签时，标签键的开头不能设置为任何大小写形式的volc:和/sys:。标签键的长度需为 1～128 个字符。",
          "type": "string"
        },
        "Value": {
          "description": "标签值。支持中文、英文大写字母、英文小写字母、数字和空格。支持以下特殊字符_.:/=+-@。不能以空格为开头或结尾。标签键的长度需为 0～255 个字符。",
          "type": "string"
        }
      },
      "required": [
        "Key"
      ],
      "type": "object"
    },
    "TagCondition": {
      "properties": {
        "Condition": {
          "description": "判断条件。and：全部满足。or：任意满足。",
          "type": "string"
        },
        "Tags": {
          "description": "标签列表。最多支持配置 10 个标签列表。标签值不能超过 50 个字符。",
          "insertionOrder": false,
          "items": {
            "$ref": "#/definitions/KVComparator"
          },
          "type": "array",
          "uniqueItems": true
        }
      },
      "type": "object"
    }
  },
  "description": "如果您需要监控某一云产品资源的数据状态，则可以创建云监控告警策略。当被监控的云产品资源数据达到告警的触发条件时，系统会通过您指定的方式推送告警通知，便于您及时发现存在异常数据的资源。",
  "filterProperties": {
    "filterableProperties": [
      "/properties/AlertState",
      "/properties/Namespace",
      "/properties/Level",
      "/properties/EnableState",
      "/properties/ContactGroupIds",
      "/properties/ProjectName",
      "/properties/RuleName"
    ]
  },
  "handlers": {
    "create": {
      "permissions": [
        "cloudmonitor:CreateRule",
        "cloudmonitor:ListRulesByIds"
      ]
    },
    "delete": {
      "permissions": [
        "cloudmonitor:DeleteRulesByIds",
        "cloudmonitor:ListRulesByIds"
      ]
    },
    "list": {
      "permissions": [
        "cloudmonitor:ListRules"
      ]
    },
    "read": {
      "permissions": [
        "cloudmonitor:ListRulesByIds"
      ]
    },
    "update": {
      "permissions": [
        "cloudmonitor:ListRulesByIds",
        "cloudmonitor:UpdateRule"
      ]
    }
  },
  "primaryIdentifier": [
    "/properties/RuleId"
  ],
  "properties": {
    "AlertMethods": {
      "description": "告警通知的方式。Email：邮件 Phone：电话 SMS：短信 Webhook：告警回调。",
      "insertionOrder": false,
      "items": {
        "type": "string"
      },
      "type": "array",
      "uniqueItems": true
    },
    "AlertState": {
      "description": "告警状态。 alerting：告警中 normal：正常。",
      "type": "string"
    },
    "ConditionOperator": {
      "description": "多指标判定条件。\u0026\u0026：多个指标同时成立才判定为触发告警,||：任意指标满足条件触发判定为告警。",
      "type": "string"
    },
    "Conditions": {
      "description": "告警条件。数组形式，支持填写多个指标判断语句，最多 10 个。",
      "insertionOrder": false,
      "items": {
        "$ref": "#/definitions/Condition"
      },
      "type": "array",
      "uniqueItems": true
    },
    "ContactGroupIds": {
      "description": "告警策略绑定的告警通知组 ID。",
      "insertionOrder": false,
      "items": {
        "type": "string"
      },
      "type": "array",
      "uniqueItems": true
    },
    "CreatedAt": {
      "description": "告警策略创建时间，时间戳格式。",
      "semantic": "createdTime",
      "type": "string"
    },
    "Description": {
      "description": "告警策略描述信息。",
      "semantic": "description",
      "type": "string"
    },
    "DimensionConditions": {
      "$ref": "#/definitions/DimensionConditions",
      "description": "Dimension 配置。",
      "type": "object"
    },
    "EffectEndAt": {
      "description": "策略生效的截止时间，格式为HH:MM。",
      "type": "string"
    },
    "EffectStartAt": {
      "description": "告警策略生效的开始时间，格式为HH:MM。",
      "type": "string"
    },
    "EnableState": {
      "description": "告警策略的开启状态。,enable：开启,disable：禁用",
      "type": "string"
    },
    "EvaluationCount": {
      "description": "触发告警需要持续的周期。单位为分钟。",
      "type": "integer"
    },
    "Level": {
      "description": "告警级别。critical：严重,warning：警告,notice：通知",
      "type": "string"
    },
    "LevelConditions": {
      "description": "告警分级配置。",
      "insertionOrder": false,
      "items": {
        "$ref": "#/definitions/LevelCondition"
      },
      "type": "array",
      "uniqueItems": true
    },
    "MultipleConditions": {
      "description": "告警策略是否用多指标。true：多指标,false：单指标（默认）。",
      "type": "boolean"
    },
    "Namespace": {
      "description": "监控指标所属的云产品。详情请参见 云产品监控指标 下各产品的 Namespace。",
      "type": "string"
    },
    "NoData": {
      "$ref": "#/definitions/NoData",
      "description": "无数据告警。",
      "type": "object"
    },
    "NotificationId": {
      "description": "通知策略 ID。",
      "type": "string"
    },
    "NotifyTemplates": {
      "description": "通知模版配置。",
      "insertionOrder": false,
      "items": {
        "$ref": "#/definitions/NotifyTemplate"
      },
      "type": "array",
      "uniqueItems": true
    },
    "OriginalDimensions": {
      "$ref": "#/definitions/OriginalDimensions",
      "description": "告警策略检测的资源 ID。",
      "type": "object"
    },
    "ProjectName": {
      "description": "告警策略所属项目。",
      "semantic": "projectName",
      "type": "string"
    },
    "RecoveryNotify": {
      "$ref": "#/definitions/RecoveryNotify",
      "description": "告警恢复通知。",
      "type": "object"
    },
    "Regions": {
      "description": "云产品所属可用区 ID。",
      "insertionOrder": false,
      "items": {
        "type": "string"
      },
      "type": "array",
      "uniqueItems": true
    },
    "ResourceType": {
      "description": "告警策略检测的资源类型。",
      "type": "string"
    },
    "RuleId": {
      "description": "告警策略 ID。",
      "semantic": "resourceId",
      "type": "string"
    },
    "RuleName": {
      "description": "告警策略名称。",
      "semantic": "resourceName",
      "type": "string"
    },
    "RuleType": {
      "description": "告警策略的类型。static：手动选择。dynamic：通过资源名称、项目和标签选择。",
      "type": "string"
    },
    "SilenceTime": {
      "description": "告警发送周期。单位为分钟。支持配置为 5、10、15、30、60、180、360、720、1440。",
      "type": "integer"
    },
    "SubNamespace": {
      "description": "此策略引用的指标所属的维度。详情请参见 云产品监控指标 下各产品的 SubNamespace。",
      "type": "string"
    },
    "Tags": {
      "description": "告警策略绑定 Tag。",
      "insertionOrder": false,
      "items": {
        "$ref": "#/definitions/Tag"
      },
      "semantic": "tags",
      "type": "array",
      "uniqueItems": true
    },
    "UpdatedAt": {
      "description": "告警策略更新时间，时间戳格式。",
      "semantic": "updatedTime",
      "type": "string"
    },
    "Webhook": {
      "description": "告警策略绑定的告警回调 URL 地址。",
      "type": "string"
    },
    "WebhookIds": {
      "description": "告警发生时告警回调 ID 列表。",
      "insertionOrder": false,
      "items": {
        "type": "string"
      },
      "type": "array",
      "uniqueItems": true
    }
  },
  "readOnlyProperties": [
    "/properties/AlertState",
    "/properties/CreatedAt",
    "/properties/RuleId",
    "/properties/ResourceType",
    "/properties/UpdatedAt",
    "/properties/Conditions/*/DisplayName",
    "/properties/LevelConditions/*/Conditions/*/DisplayName"
  ],
  "required": [
    "EffectEndAt",
    "EffectStartAt",
    "EnableState",
    "EvaluationCount",
    "Level",
    "Namespace",
    "RuleName",
    "RuleType",
    "SilenceTime",
    "SubNamespace"
  ],
  "tagging": {
    "tagOnCreate": true,
    "tagUpdatable": true,
    "taggable": true
  },
  "typeName": "Volcengine::CloudMonitor::Rule",
  "writeOnlyProperties": [
    "/properties/NoData"
  ]
}