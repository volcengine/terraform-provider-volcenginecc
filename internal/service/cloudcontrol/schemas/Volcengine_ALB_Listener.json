{
  "additionalProperties": false,
  "createOnlyProperties": [
    "/properties/LoadBalancerId",
    "/properties/Protocol",
    "/properties/Port"
  ],
  "definitions": {
    "DomainExtension": {
      "properties": {
        "CertCenterCertificateId": {
          "description": "域名使用的服务器证书 ID 。当证书来源为 cert_center 时生效。",
          "type": "string"
        },
        "CertificateId": {
          "description": "域名使用的服务器证书 ID。当证书来源为 alb 时生效。",
          "type": "string"
        },
        "CertificateSource": {
          "description": "域名使用的服务器证书的来源，取值：alb：表示通过 ALB 上传的证书。cert_center：表示通过火山引擎证书中心购买或上传的 SSL 证书。",
          "enum": [
            "alb",
            "cert_center"
          ],
          "type": "string"
        },
        "Domain": {
          "description": "域名。通常不能为空，若实例支持自动选择扩展证书，即SniAutoMatch为on，则Domain需传入空字符串。需至少包含一个‘.’，且不允许以‘.’开头或结尾。仅允许包含小写字、字、‘.’、‘-‘、‘*’。长度限制为1 ～ 128个字符。泛域名：使用“*”代替1个或多个字符。“*”必须在域名开头或结尾。同一条域名中“*”不能出现两次。“*”前后不能有除了.以外的字符。精确域名：符合域名规范的精确域名。同一HTTPS监听器下的域名不能重复。匹配域名时，对域名的大小写不敏感。",
          "maxLength": 128,
          "minLength": 0,
          "type": "string"
        },
        "DomainExtensionId": {
          "description": "扩展域名 ID 。",
          "type": "string"
        },
        "ListenerId": {
          "description": "扩展域名所属的监听器 ID。",
          "type": "string"
        },
        "PcaLeafCertificateId": {
          "description": "HTTPS监听器关联的私有叶子证书 ID。创建 HTTPS 监听器且证书来源为 pca_leaf 时必传。",
          "type": "string"
        },
        "San": {
          "description": "若实例支持自动选择扩展证书，即SniAutoMatch为on时，则Domain是空字符串。San为证书的扩展域名，用英文,分隔多个域名。",
          "type": "string"
        }
      },
      "type": "object"
    },
    "ServerGroup": {
      "properties": {
        "ServerGroupId": {
          "description": "服务器组 ID 。",
          "type": "string"
        },
        "ServerGroupName": {
          "description": "服务器组名称。",
          "type": "string"
        }
      },
      "type": "object"
    },
    "Tag": {
      "properties": {
        "Key": {
          "description": "用户标签的标签键。具体规则如下：长度限制为1～128个字符。大小写敏感。不能以volc:的任意大小写组合开头。不能以空格开头或结尾。允许包含各国语言文字、数字、空格）、下划线（_）、点号（.）、半角冒号（:）、斜杠（/）、等号（=）、加号（+）、减号（-）和@。同一资源的标签键不允许重复。",
          "maxLength": 128,
          "minLength": 1,
          "type": "string"
        },
        "Value": {
          "description": "用户标签的标签值。具体规则如下：长度限制为0～256个字符。大小写敏感。不能以空格开头或结尾。允许包含各国语言文字、数字、空格（）、下划线（_）、点号（.）、半角冒（:）、斜杠（/）、等号（=）、加号（+）、减号（-）和@。",
          "maxLength": 256,
          "minLength": 0,
          "type": "string"
        }
      },
      "required": [
        "Key",
        "Value"
      ],
      "type": "object"
    }
  },
  "description": "每个 ALB 实例至少要有一个监听器才能正常工作。监听器接收客户端请求，并根据您配置的转发规则和负载均衡算法将请求分发到后端服务器上。您可以在一个 ALB 实例下创建多个监听器，并为监听器配置不同的监听协议，以处理使用不同协议的客户端请求。",
  "handlers": {
    "create": {
      "permissions": [
        "alb:CreateListener",
        "alb:DescribeListeners",
        "alb:DescribeListenerAttributes"
      ]
    },
    "delete": {
      "permissions": [
        "alb:DeleteListener",
        "alb:DescribeListeners"
      ]
    },
    "list": {
      "permissions": [
        "alb:DescribeListeners"
      ]
    },
    "read": {
      "permissions": [
        "alb:DescribeListeners",
        "alb:DescribeListenerAttributes"
      ]
    },
    "update": {
      "permissions": [
        "alb:ModifyListenerAttributes",
        "alb:DescribeListeners",
        "alb:DescribeListenerAttributes",
        "alb:TagResources",
        "alb:UntagResources"
      ]
    }
  },
  "primaryIdentifier": [
    "/properties/ListenerId"
  ],
  "properties": {
    "AccessLogRecordCustomizedHeadersEnabled": {
      "description": "监听器是否已开启“在访问日志中记录自定义header”的功能：on：表示该功能已开启。off：表示该功能未开启。",
      "enum": [
        "on",
        "off"
      ],
      "type": "string"
    },
    "AclIds": {
      "description": "监听器绑定的访问控制策略组 ID。当AclStatus参数配置为 on 时，AclIds为必填参数。",
      "insertionOrder": false,
      "items": {
        "type": "string"
      },
      "maxItems": 5,
      "type": "array",
      "uniqueItems": true
    },
    "AclStatus": {
      "default": "off",
      "description": "是否开启访问控制功能。取值如下：on：开启。off ：不开启（默认）。",
      "enum": [
        "on",
        "off"
      ],
      "type": "string"
    },
    "AclType": {
      "description": "访问控制的方式，取值如下：white：白名单方式。表示监听器仅转发来自所选访问控制策略组中设置的IP地址或地址段的请求。 如果所选策略组中没有添加任何IP，则监听器不会转发任何请求。black：黑名单方式。表示仅拒绝来自所选访问控制策略组中设置的IP地址或地址段的请求。 如果所选策略组中没有添加任何IP，则监听器会转发全部请求。当AclStatus参数配置为 on 时，AclType为必填参数。",
      "enum": [
        "white",
        "black",
        ""
      ],
      "type": "string"
    },
    "CACertificateId": {
      "description": "HTTPS 监听器关联的 CA 证书 ID。该参数用于 HTTPS 监听器的双向认证。当证书来源是 alb 时，必须指定 CACertificateId 参数。",
      "type": "string"
    },
    "CACertificateSource": {
      "default": "alb",
      "description": "HTTPS 监听器关联的 CA 证书的来源，用于双向认证。alb（默认）：表示通过 ALB 上传的证书。标准版 ALB 实例不支持此来源的证书。pca_root：表示通过火山引擎证书中心购买或上传的私有根 CA 证书。pca_sub：表示通过火山引擎证书中心购买或上传的私有子 CA 证书。",
      "enum": [
        "alb",
        "pca_root",
        "pca_sub",
        ""
      ],
      "type": "string"
    },
    "CertCenterCertificateId": {
      "description": "HTTPS监听器关联的证书 ID。创建 HTTPS 监听器且证书来源为 cert_center 时必传。",
      "type": "string"
    },
    "CertificateId": {
      "description": "HTTPS监听器关联的证书 ID。创建 HTTPS 监听器且证书来源为 alb 时必传。",
      "type": "string"
    },
    "CertificateSource": {
      "description": "HTTPS监听器关联的默认证书的来源，取值：alb：表示通过 ALB 上传的证书。cert_center：表示通过火山引擎证书中心购买或上传的 SSL 证书。pca_leaf：表示通过火山引擎证书中心购买或上传的私有叶子证书。",
      "enum": [
        "alb",
        "cert_center",
        "pca_leaf"
      ],
      "type": "string"
    },
    "CreatedTime": {
      "description": "监听器的创建时间。",
      "semantic": "createdTime",
      "type": "string"
    },
    "CustomizedCfgId": {
      "description": "个性化配置ID，未绑定时值为空字符串。",
      "type": "string"
    },
    "Description": {
      "default": "",
      "description": "监听器的描述。不能以http://或https://开头。必须以字母或中文开头，可包含数字、英文逗号（,）、点号（.）、下划线（_）、空格（ ）、等号（=）、短横线（-）、中文逗号（，）、中文句号（。） 。长度限制为1 ～ 255个字符。不填默认为空字符串。",
      "maxLength": 255,
      "minLength": 0,
      "semantic": "description",
      "type": "string"
    },
    "DomainExtensions": {
      "description": "HTTPS监听器关联的扩展域名列表。一个HTTPS监听器能关联的扩展域名上限为20个。",
      "insertionOrder": false,
      "items": {
        "$ref": "#/definitions/DomainExtension"
      },
      "maxItems": 20,
      "type": "array",
      "uniqueItems": true
    },
    "EnableHttp2": {
      "default": "off",
      "description": "HTTP2.0 特性开关，该参数仅对 HTTPS 监听器有效。取值如下：on：开启。off：关闭（默认）。",
      "enum": [
        "on",
        "off"
      ],
      "type": "string"
    },
    "EnableQuic": {
      "default": "off",
      "description": "QUIC 特性开关，该参数仅对 HTTPS 监听器有效，取值如下：on：开启。off：关闭（默认）。只有标准版 ALB 实例支持 QUIC。",
      "enum": [
        "on",
        "off"
      ],
      "type": "string"
    },
    "Enabled": {
      "default": "on",
      "description": "监听器开启/关闭，取值如下：on：开启（默认）。off：关闭。",
      "enum": [
        "on",
        "off"
      ],
      "type": "string"
    },
    "ListenerId": {
      "description": "监听器 ID。",
      "semantic": "resourceId",
      "type": "string"
    },
    "ListenerName": {
      "description": "监听器的名字。不填写时以“协议-端口”格式命名。不能以http://或https://开头。必须以字母或中文开头，可包含数字、点（.）、下划线（_）和短横线（-）。长度限制在1-128字符之间。",
      "maxLength": 128,
      "minLength": 1,
      "semantic": "resourceName",
      "type": "string"
    },
    "LoadBalancerId": {
      "description": "监听器所属的负载均衡实例 ID。",
      "type": "string"
    },
    "PcaLeafCertificateId": {
      "description": "HTTPS监听器关联的私有叶子证书 ID。创建 HTTPS 监听器且证书来源为 pca_leaf 时必传。",
      "type": "string"
    },
    "PcaRootCACertificateId": {
      "description": "HTTPS 监听器关联的 CA 证书 ID。该参数用于 HTTPS 监听器的双向认证。当证书来源是 pca_root 时，必须指定 PcaRootCACertificateId 参数。",
      "type": "string"
    },
    "PcaSubCACertificateId": {
      "description": "HTTPS 监听器关联的 CA 证书 ID。该参数用于 HTTPS 监听器的双向认证。当证书来源是 pca_sub 时，必须指定 PcaSubCACertificateId 参数。",
      "type": "string"
    },
    "Port": {
      "description": "监听器的监听端口，取值：1 - 65535 。",
      "format": "int64",
      "maximum": 65535,
      "minimum": 1,
      "type": "integer"
    },
    "ProjectName": {
      "description": "监听器所属项目名称。",
      "type": "string"
    },
    "Protocol": {
      "description": "监听器的协议，支持 HTTP 协议和 HTTPS 协议。",
      "enum": [
        "HTTP",
        "HTTPS"
      ],
      "type": "string"
    },
    "ServerGroupId": {
      "description": "监听器的默认服务器组。",
      "type": "string"
    },
    "ServerGroups": {
      "description": "关联监听器的所有服务器组。",
      "insertionOrder": false,
      "items": {
        "$ref": "#/definitions/ServerGroup"
      },
      "maxItems": 50,
      "type": "array",
      "uniqueItems": true
    },
    "Status": {
      "description": "监听器的状态。取值如下：Creating：创建中。Active： 运行中。Pending： 变配中。Disabled：已停止。Deleting：删除中。",
      "enum": [
        "Creating",
        "Active",
        "Pending",
        "Disabled",
        "Deleting"
      ],
      "type": "string"
    },
    "Tags": {
      "description": "监听器所属标签。",
      "insertionOrder": false,
      "items": {
        "$ref": "#/definitions/Tag"
      },
      "maxItems": 50,
      "semantic": "tags",
      "type": "array",
      "uniqueItems": true
    },
    "UpdatedTime": {
      "description": "监听器最近一次的操作时间。",
      "semantic": "updatedTime",
      "type": "string"
    }
  },
  "readOnlyProperties": [
    "/properties/ListenerId",
    "/properties/CreatedTime",
    "/properties/UpdatedTime",
    "/properties/Status",
    "/properties/ProjectName",
    "/properties/DomainExtensions/*/DomainExtensionId",
    "/properties/DomainExtensions/*/ListenerId"
  ],
  "required": [
    "Protocol",
    "Port",
    "LoadBalancerId",
    "ServerGroupId"
  ],
  "tagging": {
    "tagOnCreate": true,
    "tagUpdatable": true,
    "taggable": true
  },
  "typeName": "Volcengine::ALB::Listener"
}