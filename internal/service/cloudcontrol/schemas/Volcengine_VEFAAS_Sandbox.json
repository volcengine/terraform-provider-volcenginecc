{
  "additionalProperties": false,
  "createOnlyProperties": [
    "/properties/CpuMilli",
    "/properties/Envs",
    "/properties/InstanceImageInfo",
    "/properties/InstanceTosMountConfig",
    "/properties/MaxConcurrency",
    "/properties/MemoryMB",
    "/properties/Metadata",
    "/properties/RequestTimeout"
  ],
  "definitions": {
    "Env": {
      "properties": {
        "Key": {
          "description": "环境变量键。",
          "type": "string"
        },
        "Value": {
          "description": "环境变量值。",
          "type": "string"
        }
      },
      "required": [
        "Key",
        "Value"
      ],
      "type": "object"
    },
    "InstanceImageInfo": {
      "properties": {
        "Command": {
          "description": "沙箱实例程序的启动命令。如需指定脚本文件，请使用绝对路径，并确保脚本具有相应的可执行权限。",
          "type": "string"
        },
        "Image": {
          "description": "沙箱实例使用的已预热镜像地址。",
          "type": "string"
        },
        "ImageId": {
          "description": "沙箱实例使用的已预热镜像 ID。",
          "type": "string"
        },
        "Port": {
          "description": "沙箱实例镜像监听端口。",
          "type": "integer"
        }
      },
      "required": [
        "Command",
        "Port"
      ],
      "type": "object"
    },
    "InstanceTosMountConfig": {
      "properties": {
        "Enable": {
          "description": "沙箱实例是否启用了实例级别的 TOS 挂载，参数值说明：true：是，false：否。",
          "type": "boolean"
        },
        "TosMountPoints": {
          "description": "启用了实例级别 TOS 挂载的沙箱实例具体 TOS 挂载目录信息。",
          "insertionOrder": false,
          "items": {
            "$ref": "#/definitions/TosMountPoint"
          },
          "type": "array",
          "uniqueItems": true
        }
      },
      "required": [
        "Enable",
        "TosMountPoints"
      ],
      "type": "object"
    },
    "MetadataItem": {
      "properties": {
        "Key": {
          "description": "标签键。",
          "type": "string"
        },
        "Value": {
          "description": "标签值。",
          "type": "string"
        }
      },
      "required": [
        "Key",
        "Value"
      ],
      "type": "object"
    },
    "TosMountPoint": {
      "properties": {
        "BucketPath": {
          "description": "沙箱实例挂载的 TOS 远端目录。",
          "type": "string"
        },
        "LocalMountPath": {
          "description": "沙箱实例挂载的 TOS 存储桶本地目录。该目录为沙箱应用已配置的 TOS 存储挂载的本地目录时，系统根据指定的本地目录，修改与之对应的 TOS BucketPath。",
          "type": "string"
        }
      },
      "required": [
        "BucketPath",
        "LocalMountPath"
      ],
      "type": "object"
    }
  },
  "description": "沙箱实例是云沙箱中实际执行沙箱镜像的安全且隔离的容器运行环境。",
  "handlers": {
    "create": {
      "permissions": [
        "vefaas:CreateSandbox",
        "vefaas:DescribeSandbox"
      ]
    },
    "delete": {
      "permissions": [
        "vefaas:KillSandbox",
        "vefaas:DescribeSandbox"
      ]
    },
    "read": {
      "permissions": [
        "vefaas:DescribeSandbox"
      ]
    },
    "update": {
      "permissions": [
        "vefaas:SetSandboxTimeout",
        "vefaas:DescribeSandbox"
      ]
    }
  },
  "primaryIdentifier": [
    "/properties/FunctionId",
    "/properties/SandboxId"
  ],
  "properties": {
    "AvailabilityZone": {
      "description": "沙箱实例所在可用区 ID。",
      "type": "string"
    },
    "CpuMilli": {
      "description": "沙箱实例 CPU 规格：单位：milli cpu取值范围：250~16000,默认值：1000。",
      "maximum": 16000,
      "type": "integer"
    },
    "CreatedTime": {
      "description": "沙箱实例创建时间。",
      "semantic": "createdTime",
      "type": "string"
    },
    "Envs": {
      "description": "沙箱实例环境变量。",
      "insertionOrder": false,
      "items": {
        "$ref": "#/definitions/Env"
      },
      "type": "array",
      "uniqueItems": true
    },
    "ErrorCode": {
      "description": "沙箱实例启动失败错误码。参数值说明：internal_load_request_error：系统内部错误，function_initialize_failed：业务进程初始化错误，function_health_check_failed：健康检查错误，route_terminating：路由删除中，正常启动沙箱实例时，该字段为空。",
      "type": "string"
    },
    "ErrorMessage": {
      "description": "沙箱实例启动失败的错误码详情。正常启动沙箱实例时，该字段为空。",
      "type": "string"
    },
    "ExpireAt": {
      "description": "沙箱实例存活时长。",
      "type": "string"
    },
    "FunctionId": {
      "description": "沙箱实例所属的沙箱应用 ID。",
      "type": "string"
    },
    "InstanceImageInfo": {
      "$ref": "#/definitions/InstanceImageInfo",
      "description": "沙箱实例镜像信息，包括镜像地址、启动命令、监听端口。",
      "type": "object"
    },
    "InstanceTosMountConfig": {
      "$ref": "#/definitions/InstanceTosMountConfig",
      "description": "沙箱实例级别对象存储（TOS）存储挂载配置。",
      "type": "object"
    },
    "InstanceType": {
      "description": "沙箱实例类型 。参数值说明：elastic：弹性实例，frozen：冻结实例，activated：激活实例，reserved：预留实例。",
      "type": "string"
    },
    "MaxConcurrency": {
      "description": "单实例请求最大并发数：取值范围：10~1000,默认值：100。",
      "maximum": 1000,
      "type": "integer"
    },
    "MemoryMB": {
      "description": "沙箱实例内存规格：单位：MiB，取值范围：512~131072，默认值：2048",
      "maximum": 131072,
      "type": "integer"
    },
    "Metadata": {
      "description": "沙箱实例标签（Label）元信息，用于标记、筛选实例。格式为\u003c\"key\":\"value\"\u003e。",
      "insertionOrder": false,
      "items": {
        "$ref": "#/definitions/MetadataItem"
      },
      "type": "array",
      "uniqueItems": true
    },
    "Pending": {
      "description": "沙箱实例是否处于 Pending 状态。参数值说明：true：是，false：否。",
      "type": "boolean"
    },
    "RequestTimeout": {
      "description": "请求超时时间：单位：秒，取值范围：1~900，正整数。默认值：30。",
      "maximum": 900,
      "type": "integer"
    },
    "RevisionNumber": {
      "description": "函数实例版本编号。",
      "type": "integer"
    },
    "SandboxId": {
      "description": "沙箱实例 ID。",
      "semantic": "resourceId",
      "type": "string"
    },
    "Status": {
      "description": "沙箱实例状态。 参数值说明：Starting：开始启动，Ready：启动完成，Failed：启动失败，Terminating：终止中。",
      "semantic": "status",
      "type": "string"
    },
    "Timeout": {
      "description": "沙箱实例存活时长：单位：分钟，取值范围：3～1440，默认值：60。",
      "maximum": 1440,
      "type": "integer"
    }
  },
  "readOnlyProperties": [
    "/properties/AvailabilityZone",
    "/properties/CreatedTime",
    "/properties/ErrorCode",
    "/properties/ErrorMessage",
    "/properties/ExpireAt",
    "/properties/InstanceType",
    "/properties/Pending",
    "/properties/RevisionNumber",
    "/properties/Status",
    "/properties/SandboxId"
  ],
  "required": [
    "FunctionId"
  ],
  "tagging": {
    "taggable": false
  },
  "typeName": "Volcengine::VEFAAS::Sandbox",
  "writeOnlyProperties": [
    "/properties/Timeout"
  ]
}