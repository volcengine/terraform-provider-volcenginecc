{
  "additionalProperties": false,
  "createOnlyProperties": [
    "/properties/LoadBalancerId",
    "/properties/Protocol",
    "/properties/Port",
    "/properties/StartPort",
    "/properties/EndPort",
    "/properties/Enabled"
  ],
  "definitions": {
    "HealthItem": {
      "properties": {
        "InstanceId": {
          "description": "后端服务器的实例 ID或IP地址。",
          "type": "string"
        },
        "Ip": {
          "description": "后端服务器的IP地址。",
          "format": "ipv4",
          "type": "string"
        },
        "Port": {
          "description": "后端服务器提供服务的端口。",
          "format": "int64",
          "maximum": 65535,
          "minimum": 1,
          "type": "integer"
        },
        "ServerId": {
          "description": "后端服务器ID。",
          "type": "string"
        },
        "ServerType": {
          "description": "后端服务器的类型。ecs：云服务器实例（即主网卡）；eni：辅助网卡；ip：IP地址",
          "enum": [
            "ecs",
            "eni",
            "ip"
          ],
          "type": "string"
        },
        "Status": {
          "description": "后端服务器的健康状态。Up：正常；Down：异常；Unused：未被使用（NLB实例已关闭跨可用区转发，且没有来自该后端服务器可用区的访问流量）。",
          "enum": [
            "Up",
            "Down",
            "Unused"
          ],
          "type": "string"
        },
        "UpdatedTime": {
          "description": "健康状态最后更新时间。",
          "format": "date-time",
          "type": "string"
        },
        "ZoneId": {
          "description": "后端服务器接收访问流量的可用区ID。",
          "type": "string"
        }
      },
      "type": "object"
    },
    "Tag": {
      "properties": {
        "Key": {
          "description": "标签键。",
          "type": "string"
        },
        "Value": {
          "description": "标签值。",
          "type": "string"
        }
      },
      "required": [
        "Key",
        "Value"
      ],
      "type": "object"
    }
  },
  "description": "监听器负责根据指定的协议和端口，监听NLB实例接收到的用户访问请求。NLB将按照该监听器关联的服务器组配置的调度算法，将访问请求转发至该服务器组内健康的后端服务器。",
  "handlers": {
    "create": {
      "permissions": [
        "nlb:CreateNLBListener",
        "nlb:DescribeNLBListenerAttributes",
        "nlb:DescribeNLBListenerHealth"
      ]
    },
    "delete": {
      "permissions": [
        "nlb:DeleteNLBListener",
        "nlb:DescribeNLBListenerAttributes",
        "nlb:DescribeNLBListenerHealth"
      ]
    },
    "list": {
      "permissions": [
        "nlb:DescribeNLBListeners"
      ]
    },
    "read": {
      "permissions": [
        "nlb:DescribeNLBListenerAttributes",
        "nlb:DescribeNLBListenerHealth"
      ]
    },
    "update": {
      "permissions": [
        "nlb:ModifyNLBListenerAttributes",
        "nlb:DescribeNLBListenerAttributes",
        "nlb:DescribeNLBListenerHealth"
      ]
    }
  },
  "primaryIdentifier": [
    "/properties/ListenerId"
  ],
  "properties": {
    "CertificateId": {
      "description": "TLS监听器服务器证书的ID，仅支持传入火山引擎证书中心 SSL 证书。。",
      "type": "string"
    },
    "ConnectionTimeout": {
      "description": "监听器的连接超时时间（秒）。",
      "format": "int64",
      "type": "integer"
    },
    "CreatedTime": {
      "description": "监听器的创建时间。",
      "semantic": "createdTime",
      "type": "string"
    },
    "Description": {
      "description": "监听器描述信息。",
      "semantic": "description",
      "type": "string"
    },
    "Enabled": {
      "description": "是否启用监听器。true：开启；false：关闭。",
      "type": "boolean"
    },
    "EndPort": {
      "description": "全端口监听的结束端口，仅当Port为0时有效。",
      "format": "int64",
      "maximum": 65535,
      "minimum": 1,
      "type": "integer"
    },
    "Health": {
      "description": "后端实例健康检查响应信息。",
      "insertionOrder": false,
      "items": {
        "$ref": "#/definitions/HealthItem"
      },
      "type": "array",
      "uniqueItems": true
    },
    "ListenerId": {
      "description": "监听器唯一标识。",
      "semantic": "resourceId",
      "type": "string"
    },
    "ListenerName": {
      "description": "监听器名称。",
      "semantic": "resourceName",
      "type": "string"
    },
    "LoadBalancerId": {
      "description": "负载均衡实例ID。",
      "type": "string"
    },
    "Port": {
      "description": "监听器接收请求的端口，0表示启用全端口监听。",
      "format": "int64",
      "maximum": 65535,
      "minimum": 0,
      "type": "integer"
    },
    "Protocol": {
      "description": "监听协议类型。",
      "enum": [
        "TCP",
        "UDP",
        "TLS"
      ],
      "type": "string"
    },
    "SecurityPolicyId": {
      "description": "TLS 安全策略ID，支持系统安全策略和自定义安全策略。系统安全策略取值：.tls_cipher_policy_1_0.tls_cipher_policy_1_1.tls_cipher_policy_1_2.tls_cipher_policy_1_2_strict.tls_cipher_policy_1_2_strict_with_1_3.自定义安全策略：输入自定义安全策略 ID。当Protocol为TLS 时，该参数为必填。。",
      "type": "string"
    },
    "ServerGroupId": {
      "description": "监听器关联的服务器组ID。",
      "type": "string"
    },
    "StartPort": {
      "description": "全端口监听的起始端口，仅当Port为0时有效。",
      "format": "int64",
      "maximum": 65535,
      "minimum": 1,
      "type": "integer"
    },
    "Status": {
      "description": "监听器的状态。",
      "semantic": "status",
      "type": "string"
    },
    "Tags": {
      "description": "资源标签。",
      "insertionOrder": false,
      "items": {
        "$ref": "#/definitions/Tag"
      },
      "semantic": "tags",
      "type": "array",
      "uniqueItems": true
    },
    "UpdatedTime": {
      "description": "监听器最近操作时间。",
      "semantic": "updatedTime",
      "type": "string"
    }
  },
  "readOnlyProperties": [
    "/properties/ListenerId",
    "/properties/CreatedTime",
    "/properties/UpdatedTime",
    "/properties/Status",
    "/properties/HealthResponse"
  ],
  "required": [
    "LoadBalancerId",
    "Protocol",
    "Port",
    "ServerGroupId"
  ],
  "tagging": {
    "tagOnCreate": true,
    "tagUpdatable": true,
    "taggable": true
  },
  "typeName": "Volcengine::CLB::NLBListener",
  "writeOnlyProperties": [
    "/properties/SecurityPolicyId",
    "/properties/CertificateId"
  ]
}