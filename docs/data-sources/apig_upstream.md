---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "volcenginecc_apig_upstream Data Source - terraform-provider-volcenginecc"
subcategory: ""
description: |-
  Data Source schema for Volcengine::APIG::Upstream
---

# volcenginecc_apig_upstream (Data Source)

Data Source schema for Volcengine::APIG::Upstream



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `id` (String) Uniquely identifies the resource.

### Read-Only

- `backend_targets` (Attributes Set) 后端节点，Upstream来源类型为VeFaas时无效。 (see [below for nested schema](#nestedatt--backend_targets))
- `circuit_breaking_settings` (Attributes) 服务熔断配置。 (see [below for nested schema](#nestedatt--circuit_breaking_settings))
- `comments` (String) 备注。
- `created_time` (String) Upstream创建时间。
- `gateway_id` (String) 网关实例ID。
- `load_balancer_settings` (Attributes) 负载均衡配置。 (see [below for nested schema](#nestedatt--load_balancer_settings))
- `name` (String) Upstream名称。
- `protocol` (String) 协议，取值：HTTP：HTTP/1.1。HTTP2：HTTP/2。GRPC：GRPC。
- `source_type` (String) Upstream来源类型，取值：VeFaas：函数服务。ECS：云服务器。K8S：容器服务。Nacos：注册中心。AIProvider：AI模型代理。
- `tls_settings` (Attributes) TLS配置。 (see [below for nested schema](#nestedatt--tls_settings))
- `updated_time` (String) Upstream更新时间。
- `upstream_id` (String) Upstream ID。
- `upstream_spec` (Attributes) Upstream配置。 (see [below for nested schema](#nestedatt--upstream_spec))
- `version_details` (Attributes Set) Upstream版本，仅在Upstream来源类型为K8S时有效。 (see [below for nested schema](#nestedatt--version_details))

<a id="nestedatt--backend_targets"></a>
### Nested Schema for `backend_targets`

Read-Only:

- `health_status` (String) 健康检查状态。
- `ip` (String) 后端节点IP。
- `port` (Number) 后端节点端口。


<a id="nestedatt--circuit_breaking_settings"></a>
### Nested Schema for `circuit_breaking_settings`

Read-Only:

- `base_ejection_time` (Number) 最小弹出时间。单位为毫秒。取值限制为1~86400000。默认值为30秒。
- `consecutive_errors` (Number) 连续失败次数。取值限制为1~100。默认值为5。
- `enable` (Boolean) 开启。
- `interval` (Number) 计算周期。单位为毫秒。取值限制为1~86400000。默认值为10秒。
- `max_ejection_percent` (Number) 最大熔断比例。取值限制为1~100。默认值为20%。
- `min_health_percent` (Number) 最小健康比例。取值限制为0~100。默认值为60%。


<a id="nestedatt--load_balancer_settings"></a>
### Nested Schema for `load_balancer_settings`

Read-Only:

- `consistent_hash_lb` (Attributes) 一致性哈希负载均衡。 (see [below for nested schema](#nestedatt--load_balancer_settings--consistent_hash_lb))
- `lb_policy` (String) 负载均衡策略，取值：SimpleLB：简单负载均衡。ConsistentHashLB：一致性哈希负载均衡。
- `simple_lb` (String) 简单负载均衡，取值：ROUND_ROBIN：轮询。LEAST_CONN：最小连接数。RANDOM：随机。
- `warmup_duration` (Number) 预热时间。单位为秒。

<a id="nestedatt--load_balancer_settings--consistent_hash_lb"></a>
### Nested Schema for `load_balancer_settings.consistent_hash_lb`

Read-Only:

- `hash_key` (String) 一致性哈希方式，取值：UseSourceIp：基于源IP地址。HttpQueryParameterName：基于参数。HttpHeaderName：基于头。HTTPCookie：基于cookie。
- `http_cookie` (Attributes) Cookie。 (see [below for nested schema](#nestedatt--load_balancer_settings--consistent_hash_lb--http_cookie))
- `http_header_name` (String) 参数。支持ASCII可打印字符，长度限制为1~256个字符。
- `http_query_parameter_name` (String) 参数。支持ASCII可打印字符，长度限制为1~256个字符。
- `use_source_ip` (String) 源IP地址。

<a id="nestedatt--load_balancer_settings--consistent_hash_lb--http_cookie"></a>
### Nested Schema for `load_balancer_settings.consistent_hash_lb.http_cookie`

Read-Only:

- `name` (String) 名称。支持ASCII可打印字符，长度限制为0~256个字符。
- `path` (String) 路径。支持ASCII可打印字符，长度限制为1~256个字符。
- `ttl` (Number) 有效期。单位为秒。




<a id="nestedatt--tls_settings"></a>
### Nested Schema for `tls_settings`

Read-Only:

- `sni` (String) SNI。留空时会将访问网关的域名透传到upstream。
- `tls_mode` (String) TLS模式，取值：DISABLE：关闭TLS。SIMPLE：单向TLS。


<a id="nestedatt--upstream_spec"></a>
### Nested Schema for `upstream_spec`

Read-Only:

- `ai_provider` (Attributes) AI模型代理。 (see [below for nested schema](#nestedatt--upstream_spec--ai_provider))
- `ecs_instances` (Attributes Set) 云服务器。 (see [below for nested schema](#nestedatt--upstream_spec--ecs_instances))
- `k8_s_service` (Attributes) 容器服务。 (see [below for nested schema](#nestedatt--upstream_spec--k8_s_service))
- `nacos_service` (Attributes) 注册中心。 (see [below for nested schema](#nestedatt--upstream_spec--nacos_service))
- `ve_faas` (Attributes) 函数服务。 (see [below for nested schema](#nestedatt--upstream_spec--ve_faas))

<a id="nestedatt--upstream_spec--ai_provider"></a>
### Nested Schema for `upstream_spec.ai_provider`

Read-Only:

- `base_url` (String) 模型地址。
- `custom_model_service` (Attributes) 火山自部署模型服务。 (see [below for nested schema](#nestedatt--upstream_spec--ai_provider--custom_model_service))
- `name` (String) 模型服务商名称。
- `token` (String) 模型API key。

<a id="nestedatt--upstream_spec--ai_provider--custom_model_service"></a>
### Nested Schema for `upstream_spec.ai_provider.custom_model_service`

Read-Only:

- `name` (String) 模型服务名称。
- `namespace` (String) 命名空间。
- `port` (Number) 端口。



<a id="nestedatt--upstream_spec--ecs_instances"></a>
### Nested Schema for `upstream_spec.ecs_instances`

Read-Only:

- `ecs_id` (String) 云服务器ID。
- `ip` (String) IP地址。
- `port` (Number) 端口。


<a id="nestedatt--upstream_spec--k8_s_service"></a>
### Nested Schema for `upstream_spec.k8_s_service`

Read-Only:

- `name` (String) 容器服务名称。长度限制为2~63个字符。
- `namespace` (String) 命名空间。长度限制为2~63个字符。
- `port` (Number) 端口。


<a id="nestedatt--upstream_spec--nacos_service"></a>
### Nested Schema for `upstream_spec.nacos_service`

Read-Only:

- `group` (String) 分组。
- `namespace` (String) 命名空间。
- `namespace_id` (String) 命名空间ID。
- `service` (String) 服务。
- `upstream_source_id` (String) Upstream来源ID。


<a id="nestedatt--upstream_spec--ve_faas"></a>
### Nested Schema for `upstream_spec.ve_faas`

Read-Only:

- `function_id` (String) 函数ID。



<a id="nestedatt--version_details"></a>
### Nested Schema for `version_details`

Read-Only:

- `labels` (Attributes Set) 标签。 (see [below for nested schema](#nestedatt--version_details--labels))
- `name` (String) 版本名称。支持大小写字母、数字和中划线（-），长度限制为2~63个字符。不能以中划线（-）开头。
- `update_time` (String) 更新时间。

<a id="nestedatt--version_details--labels"></a>
### Nested Schema for `version_details.labels`

Read-Only:

- `key` (String) 键。
- `value` (String) 值。
