---
page_title: "volcenginecc_apig_upstream_source Resource - terraform-provider-volcenginecc"
subcategory: ""
description: |-
  API 网关支持基于容器服务（VKE）集和容器服务的注册集群功能，将集群导入到 API 网关实例，将其作为网关的 Upstream 来源，以便网关获取集群中的 Service 列表。
---

# volcenginecc_apig_upstream_source (Resource)

API 网关支持基于容器服务（VKE）集和容器服务的注册集群功能，将集群导入到 API 网关实例，将其作为网关的 Upstream 来源，以便网关获取集群中的 Service 列表。

## Example Usage

```terraform
resource "volcenginecc_apig_upstream_source" "UpstreamSourceNacosDemo" {
  gateway_id  = "gd3s9vbk7npja181xxxxx"
  comments    = "upstreamSourceNacosDemo"
  source_type = "Nacos"
  source_spec = {
    nacos_source = {
      nacos_id = "nd3thmnjdl46p917xxxxx"
      auth_config = {
        basic = {
          username = "nacos"
          password = "******"
        }
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `gateway_id` (String) 网关实例ID。
- `source_spec` (Attributes) Upstream来源配置。 (see [below for nested schema](#nestedatt--source_spec))
- `source_type` (String) Upstream来源类型，取值：K8S：容器集群。Nacos：注册中心。

### Optional

- `comments` (String) 备注，长度限制为0~253个字符。
- `ingress_settings` (Attributes) 路由同步。开启后，API网关会自动监听Ingress资源的变化，并将Ingress资源转义为服务，域名，Upstream等资源合并至当前网关。由Ingress转义的资源不支持在控制台操作。仅支持容器集群来源类型。 (see [below for nested schema](#nestedatt--ingress_settings))
- `watch_namespaces` (Set of String) 指定命名空间。

### Read-Only

- `created_time` (String) 创建时间。
- `id` (String) Uniquely identifies the resource.
- `status` (String) 导入状态，取值：Syncing：导入中。SyncedSucceed：导入成功。SyncedFailed：导入失败。
- `status_message` (String) 导入状态信息，取值：ConnectionFailed：Nacos集群无法连接。AuthenticationFailed：认证失败。PermissionFailed：Nacos集群无法连接。
- `updated_time` (String) 更新时间。
- `upstream_source_id` (String) Upstream来源ID。

<a id="nestedatt--source_spec"></a>
### Nested Schema for `source_spec`

Optional:

- `k8_s_source` (Attributes) 容器集群来源。 (see [below for nested schema](#nestedatt--source_spec--k8_s_source))
- `nacos_source` (Attributes) 注册中心来源。 (see [below for nested schema](#nestedatt--source_spec--nacos_source))

<a id="nestedatt--source_spec--k8_s_source"></a>
### Nested Schema for `source_spec.k8_s_source`

Optional:

- `cluster_id` (String) 集群ID。
- `cluster_type` (String) 集群类型。


<a id="nestedatt--source_spec--nacos_source"></a>
### Nested Schema for `source_spec.nacos_source`

Optional:

- `auth_config` (Attributes) 认证配置。 (see [below for nested schema](#nestedatt--source_spec--nacos_source--auth_config))
- `nacos_id` (String) Nacos ID。

Read-Only:

- `nacos_name` (String) Nacos名称。

<a id="nestedatt--source_spec--nacos_source--auth_config"></a>
### Nested Schema for `source_spec.nacos_source.auth_config`

Optional:

- `basic` (Attributes) Basic认证。 (see [below for nested schema](#nestedatt--source_spec--nacos_source--auth_config--basic))

<a id="nestedatt--source_spec--nacos_source--auth_config--basic"></a>
### Nested Schema for `source_spec.nacos_source.auth_config.basic`

Optional:

- `password` (String) 密码。
- `username` (String) 用户名。





<a id="nestedatt--ingress_settings"></a>
### Nested Schema for `ingress_settings`

Optional:

- `enable_all_ingress_classes` (Boolean) 是否启用所有Ingress类。
- `enable_all_namespaces` (Boolean) 是否全部命名空间。
- `enable_ingress` (Boolean) 是否开启。
- `enable_ingress_without_ingress_class` (Boolean) 是否监听IngressClass为空的资源。
- `ingress_classes` (Set of String) 指定IngressClass。
- `update_status` (Boolean) 流量入口切换。开启后，当前集群Ingress中Status的IP地址会被修改为当前网关的IP地址。
- `watch_namespaces` (Set of String) 指定命名空间。

## Import

Import is supported using the following syntax:

```shell
$ terraform import volcenginecc_apig_upstream_source.example "upstream_source_id"
```