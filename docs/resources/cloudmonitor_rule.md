---
page_title: "volcenginecc_cloudmonitor_rule Resource - terraform-provider-volcenginecc"
subcategory: ""
description: |-
  如果您需要监控某一云产品资源的数据状态，则可以创建云监控告警策略。当被监控的云产品资源数据达到告警的触发条件时，系统会通过您指定的方式推送告警通知，便于您及时发现存在异常数据的资源。
---

# volcenginecc_cloudmonitor_rule (Resource)

如果您需要监控某一云产品资源的数据状态，则可以创建云监控告警策略。当被监控的云产品资源数据达到告警的触发条件时，系统会通过您指定的方式推送告警通知，便于您及时发现存在异常数据的资源。

## Example Usage

```terraform
resource "volcenginecc_cloudmonitor_rule" "CloudMonitorRuleDemo" {
  rule_name     = "CloudMonitorRuleDemo"
  description   = "this is a description"
  rule_type     = "static"
  namespace     = "VCM_AgentKitMcp"
  sub_namespace = "MCP_Service"
  original_dimensions = {
    key    = "ResourceID"
    values = ["*"]
  }
  level               = "warning"
  evaluation_count    = 1
  enable_state        = "enable"
  regions             = ["cn-beijing"]
  multiple_conditions = false
  no_data = {
    enable           = false
    evaluation_count = 4
  }
  level_conditions = [
    {
      level = "warning"
      conditions = [
        {
          metric_name         = "istio_requests_total"
          statistics          = "sum"
          comparison_operator = ">"
          threshold           = "100000"
        metric_unit = "Count" }
    ] }
  ]
  conditions = [
    {
      metric_name         = "istio_requests_total"
      statistics          = "sum"
      comparison_operator = ">"
      threshold           = "100000"
    metric_unit = "Count" }
  ]
  condition_operator = "&&"
  silence_time       = 5
  recovery_notify = {
    enable = true
  }
  project_name = "default"
  tags = [
    {
      key = "env"
    value = "test" }
  ]
  alert_methods     = ["Email", "Webhook"]
  webhook_ids       = ["2005838xxxxx67xxxxx"]
  contact_group_ids = ["20041xxxxxx06xxxxx"]
  effect_start_at   = "00:00"
  effect_end_at     = "23:59"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `effect_end_at` (String) 策略生效的截止时间，格式为HH:MM。
- `effect_start_at` (String) 告警策略生效的开始时间，格式为HH:MM。
- `enable_state` (String) 告警策略的开启状态。,enable：开启,disable：禁用
- `evaluation_count` (Number) 触发告警需要持续的周期。单位为分钟。
- `level` (String) 告警级别。critical：严重,warning：警告,notice：通知
- `namespace` (String) 监控指标所属的云产品。详情请参见 云产品监控指标 下各产品的 Namespace。
- `rule_name` (String) 告警策略名称。
- `rule_type` (String) 告警策略的类型。static：手动选择。dynamic：通过资源名称、项目和标签选择。
- `silence_time` (Number) 告警发送周期。单位为分钟。支持配置为 5、10、15、30、60、180、360、720、1440。
- `sub_namespace` (String) 此策略引用的指标所属的维度。详情请参见 云产品监控指标 下各产品的 SubNamespace。

### Optional

- `alert_methods` (Set of String) 告警通知的方式。Email：邮件 Phone：电话 SMS：短信 Webhook：告警回调。
- `condition_operator` (String) 多指标判定条件。&&：多个指标同时成立才判定为触发告警,||：任意指标满足条件触发判定为告警。
- `conditions` (Attributes Set) 告警条件。数组形式，支持填写多个指标判断语句，最多 10 个。
 特别提示: 在使用 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--conditions))
- `contact_group_ids` (Set of String) 告警策略绑定的告警通知组 ID。
- `description` (String) 告警策略描述信息。
- `dimension_conditions` (Attributes) Dimension 配置。 (see [below for nested schema](#nestedatt--dimension_conditions))
- `level_conditions` (Attributes Set) 告警分级配置。
 特别提示: 在使用 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--level_conditions))
- `multiple_conditions` (Boolean) 告警策略是否用多指标。true：多指标,false：单指标（默认）。
- `no_data` (Attributes) 无数据告警。 (see [below for nested schema](#nestedatt--no_data))
- `notification_id` (String) 通知策略 ID。
- `notify_templates` (Attributes Set) 通知模版配置。
 特别提示: 在使用 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--notify_templates))
- `original_dimensions` (Attributes) 告警策略检测的资源 ID。 (see [below for nested schema](#nestedatt--original_dimensions))
- `project_name` (String) 告警策略所属项目。
- `recovery_notify` (Attributes) 告警恢复通知。 (see [below for nested schema](#nestedatt--recovery_notify))
- `regions` (Set of String) 云产品所属可用区 ID。
- `tags` (Attributes Set) 告警策略绑定 Tag。
 特别提示: 在使用 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--tags))
- `webhook` (String) 告警策略绑定的告警回调 URL 地址。
- `webhook_ids` (Set of String) 告警发生时告警回调 ID 列表。

### Read-Only

- `alert_state` (String) 告警状态。 alerting：告警中 normal：正常。
- `created_at` (String) 告警策略创建时间，时间戳格式。
- `id` (String) Uniquely identifies the resource.
- `resource_type` (String) 告警策略检测的资源类型。
- `rule_id` (String) 告警策略 ID。
- `updated_at` (String) 告警策略更新时间，时间戳格式。

<a id="nestedatt--conditions"></a>
### Nested Schema for `conditions`

Optional:

- `comparison_operator` (String) 比较符号。支持普通阈值告警： >、>=、<、<=、!=、= ，以及以下同环比告警：last_period_increase_pct：环比上周期上涨。last_period_decrease_pct：环比上周起下降。last_period_abs_pct：环比上周期上涨或下降。last_day_increase_pct：同比昨天同一时段上涨。last_day_decrease_pct：同比昨天同一时段下降。last_day_abs_pct：同比昨天同一时段上涨或下降。last_week_increase_pct：同比上周同一时段上涨。last_week_decrease_pct：同比上周同一时段下降。last_week_abs_pct：同比上周同一时段上涨或下降。
- `metric_name` (String) 监控指标的名称。详情请参见 云监控指标查询 下各产品的 MetricName。
- `metric_unit` (String) 监控指标的单位。详情请参见 云监控指标查询 下各产品的 MetricUnit。说明同环比告警，MetricUnit 需要填写为 "Percent"。MetricUnit 中是否带有 IEC 表示不同的进位：带有 IEC：进位是 1024不带 IEC：进位是 1000。
- `period` (String) 监控指标的统计周期。详情请参见 云监控指标查询 下各产品的 Period。
- `statistics` (String) 统计方法，取值：avg：平均值。max：最大值。min：最小值。说明统计方法会应用到检测时间段内的数据上。例如，默认每次检测数据的时间跨度是 1 分钟，如果统计方法为 avg，那就是对 1 分钟内的数据取平均值。
- `threshold` (String) 指标阈值。支持输入正数或 0。最多支持三位小数。


<a id="nestedatt--dimension_conditions"></a>
### Nested Schema for `dimension_conditions`

Optional:

- `meta_condition` (Attributes) 根据资源名称选择告警对象的条件。当Type为meta时必填。 (see [below for nested schema](#nestedatt--dimension_conditions--meta_condition))
- `project_condition` (Attributes) 根据项目选择告警对象的条件。当Type为project时必填。 (see [below for nested schema](#nestedatt--dimension_conditions--project_condition))
- `tag_condition` (Attributes) 根据标签选择告警对象的条件。当Type为tag时必填。 (see [below for nested schema](#nestedatt--dimension_conditions--tag_condition))
- `type` (String) Dimensions 类型。取值：project：根据项目选择告警对象。tag：根据标签选择告警对象。meta：根据资源名称选择告警对象。

<a id="nestedatt--dimension_conditions--meta_condition"></a>
### Nested Schema for `dimension_conditions.meta_condition`

Optional:

- `all_dimensions` (Boolean) 是否为全量资源。true：全部资源。false：部分资源。
- `condition` (String) 判断条件。and：全部满足。or：任意满足。
- `metas` (Attributes List) 判断条件。and：全部满足。or：任意满足。
 特别提示: 在使用 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--dimension_conditions--meta_condition--metas))

<a id="nestedatt--dimension_conditions--meta_condition--metas"></a>
### Nested Schema for `dimension_conditions.meta_condition.metas`

Optional:

- `comparator` (String) 标签匹配时的比较符。contain：包含not_contain：不包含prefix_match：前缀匹配suffix_match：后缀匹配equal：等于not_equal：不等于exist：存在。
- `key` (String) 标签键。
- `values` (Set of String) 标签的值（Value）。当Comparator为exist时，包含 Key 对应的所有 Value，不支持输入。当Comparator为equal或not_equal时，支持输入多个 Value。当Comparator为contain、not_contain、prefix_match或suffix_match时，仅支持输入 1 个 Value。



<a id="nestedatt--dimension_conditions--project_condition"></a>
### Nested Schema for `dimension_conditions.project_condition`

Optional:

- `projects` (Set of String) 项目名称列表。数组形式。多个值之间使用英文半角逗号,分割。


<a id="nestedatt--dimension_conditions--tag_condition"></a>
### Nested Schema for `dimension_conditions.tag_condition`

Optional:

- `condition` (String) 判断条件。and：全部满足。or：任意满足。
- `tags` (Attributes Set) 标签列表。最多支持配置 10 个标签列表。标签值不能超过 50 个字符。
 特别提示: 在使用 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--dimension_conditions--tag_condition--tags))

<a id="nestedatt--dimension_conditions--tag_condition--tags"></a>
### Nested Schema for `dimension_conditions.tag_condition.tags`

Optional:

- `comparator` (String) 标签匹配时的比较符。contain：包含not_contain：不包含prefix_match：前缀匹配suffix_match：后缀匹配equal：等于not_equal：不等于exist：存在。
- `key` (String) 标签键。
- `values` (Set of String) 标签的值（Value）。当Comparator为exist时，包含 Key 对应的所有 Value，不支持输入。当Comparator为equal或not_equal时，支持输入多个 Value。当Comparator为contain、not_contain、prefix_match或suffix_match时，仅支持输入 1 个 Value。




<a id="nestedatt--level_conditions"></a>
### Nested Schema for `level_conditions`

Optional:

- `conditions` (Attributes List) 告警分级配置。
 特别提示: 在使用 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--level_conditions--conditions))
- `level` (String) 告警通知等级，取值：notice：通知warning：警告critical：严重recovery：恢复。

<a id="nestedatt--level_conditions--conditions"></a>
### Nested Schema for `level_conditions.conditions`

Optional:

- `comparison_operator` (String) 比较符号。支持普通阈值告警： >、>=、<、<=、!=、= ，以及以下同环比告警：last_period_increase_pct：环比上周期上涨。last_period_decrease_pct：环比上周起下降。last_period_abs_pct：环比上周期上涨或下降。last_day_increase_pct：同比昨天同一时段上涨。last_day_decrease_pct：同比昨天同一时段下降。last_day_abs_pct：同比昨天同一时段上涨或下降。last_week_increase_pct：同比上周同一时段上涨。last_week_decrease_pct：同比上周同一时段下降。last_week_abs_pct：同比上周同一时段上涨或下降。
- `metric_name` (String) 监控指标的名称。详情请参见 云监控指标查询 下各产品的 MetricName。
- `metric_unit` (String) 监控指标的单位。详情请参见 云监控指标查询 下各产品的 MetricUnit。说明同环比告警，MetricUnit 需要填写为 "Percent"。MetricUnit 中是否带有 IEC 表示不同的进位：带有 IEC：进位是 1024不带 IEC：进位是 1000。
- `period` (String) 监控指标的统计周期。详情请参见 云监控指标查询 下各产品的 Period。
- `statistics` (String) 统计方法，取值：avg：平均值。max：最大值。min：最小值。说明统计方法会应用到检测时间段内的数据上。例如，默认每次检测数据的时间跨度是 1 分钟，如果统计方法为 avg，那就是对 1 分钟内的数据取平均值。
- `threshold` (String) 指标阈值。支持输入正数或 0。最多支持三位小数。



<a id="nestedatt--no_data"></a>
### Nested Schema for `no_data`

Optional:

- `enable` (Boolean) 是否开启无数据告警。取值：true：开启无数据告警。false：（默认）关闭无数据告警。
- `evaluation_count` (Number) 无数据告警触发阈值，如果在配置的阈值周期内检测无数据上报，则会触发无数据告警。当Enable配置为true时，该字段为必填。整数形式，取值范围为 3～20。


<a id="nestedatt--notify_templates"></a>
### Nested Schema for `notify_templates`

Optional:

- `channel` (String) 通知渠道，取值：email：邮箱sms：短信phone：电话lark：飞书dingtalk：钉钉wecom：企业微信slack：Slackapi：回调地址。
- `notify_template_id` (String) 通知模版 ID。注意每种通知渠道仅支持配置 1 个通知模版 ID。


<a id="nestedatt--original_dimensions"></a>
### Nested Schema for `original_dimensions`

Optional:

- `key` (String) 指标 Dimension 名称，例如ResourceID、NodeName等。不同云产品的 Dimensions 名称不同，详情请参见 云监控指标查询。ResourceID为必填项，且大小写必须与 云监控指标查询 中的一致。支持同时填写多个 Dimension 名称，并基于多个 Dimension 名称进行分组。举例如下：当您仅填写ResourceID时，系统会按照ResourceID进行告警分组。当您同时填写ResourceID和NodeName时，系统会首先按照ResourceID进行告警分组。然后在每个分组内，再按照NodeName进行分组。
- `values` (Set of String) 指标 Dimension 值，数组形式。多个值之间使用英文半角逗号,分割。允许使用通配符*选择全部实例的值。例如：["*"] 。


<a id="nestedatt--recovery_notify"></a>
### Nested Schema for `recovery_notify`

Optional:

- `enable` (Boolean) 是否开启告警恢复通知。取值：true：（默认）开启告警恢复通知。false：关闭告警恢复通知。


<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String) 标签键。支持中文、英文大写字母、英文小写字母、数字和空格。支持以下特殊字符_.:/=+-@。不能以空格为开头或结尾。volc:和/sys:为系统预留的标签键，添加标签时，标签键的开头不能设置为任何大小写形式的volc:和/sys:。标签键的长度需为 1～128 个字符。
- `value` (String) 标签值。支持中文、英文大写字母、英文小写字母、数字和空格。支持以下特殊字符_.:/=+-@。不能以空格为开头或结尾。标签键的长度需为 0～255 个字符。

## Import

Import is supported using the following syntax:

```shell
$ terraform import volcenginecc_cloudmonitor_rule.example "rule_id"
```