---
page_title: "volcenginecc_alb_server_group Resource - terraform-provider-volcenginecc"
subcategory: ""
description: |-
  服务器组是后端服务器的逻辑集合。ALB 实例按照您配置的转发规则确定客户端请求将被转发到的服务器组。然后，ALB 实例根据您配置的负载均衡策略，将请求分发给服务器组内的后端服务器。后端服务器接收并处理请求。
---

# volcenginecc_alb_server_group (Resource)

服务器组是后端服务器的逻辑集合。ALB 实例按照您配置的转发规则确定客户端请求将被转发到的服务器组。然后，ALB 实例根据您配置的负载均衡策略，将请求分发给服务器组内的后端服务器。后端服务器接收并处理请求。

## Example Usage

```terraform
resource "volcenginecc_alb_server_group" "AlbServergroupDemo" {
  vpc_id            = "vpc-13f8***"
  server_group_name = "test-servergroup"
  server_group_type = "instance"
  protocol          = "HTTP"
  scheduler         = "wrr"
  health_check = {
    enabled             = "on"
    port                = 80
    interval            = 2
    timeout             = 5
    healthy_threshold   = 3
    unhealthy_threshold = 3
    method              = "GET"
    http_version        = "HTTP1.1"
    uri                 = "/health"
    http_code           = "http_2xx"
  }
  sticky_session_config = {
    sticky_session_enabled = "on"
    sticky_session_type    = "insert"
    cookie_timeout         = 1000
  }
  servers = [
    {
      instance_id = "i-ye3***"
      type        = "ecs"
      ip          = "192.168.1.**"
      port        = 80
      weight      = 10
    }
  ]
  tags = [
    {
      key   = "env"
      value = "test"
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `vpc_id` (String) 后端服务器组所属 Vpc 的 ID。

### Optional

- `description` (String) 后端服务器组的描述。
- `health_check` (Attributes) 服务器组健康检查配置信息。 (see [below for nested schema](#nestedatt--health_check))
- `ip_address_type` (String) 服务器组的IP地址类型。目前只支持 IPv4
- `project_name` (String) 后端服务器组所属项目名称。
- `protocol` (String) 后端协议：HTTP，HTTPS。
- `scheduler` (String) 调度算法。取值：wrr：加权轮询。wlc：加权最小连接数。sh：源地址哈希。
- `server_group_name` (String) 后端服务器组的名称。
- `server_group_type` (String) 后端服务器组的类型。instance：服务器类型，该类型服务器组支持添加 ecs、eni 实例作为后端服务器。ip：IP类型，该类型服务器组支持添加 IP 地址作为后端服务器。
- `servers` (Attributes Set) 后端服务器组中服务器的信息。
 特别提示: 在使用 ListNestedAttribute 或 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--servers))
- `status` (String) 服务器组状态。Creating：创建中。Active：运行中。Configuring：配置中。Deleting：删除中。
- `sticky_session_config` (Attributes) 会话保持功能的参数信息。 (see [below for nested schema](#nestedatt--sticky_session_config))
- `tags` (Attributes Set) 标签信息。
 特别提示: 在使用 ListNestedAttribute 或 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--tags))

### Read-Only

- `create_time` (String) 后端服务器组的创建时间。
- `id` (String) Uniquely identifies the resource.
- `listeners` (Attributes Set) 后端服务器组关联的监听器信息。
 特别提示: 在使用 ListNestedAttribute 或 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--listeners))
- `server_count` (Number) 服务器组内后端服务器的个数。
- `server_group_id` (String) 后端服务器组的ID。
- `update_time` (String) 后端服务器组的最近操作时间。

<a id="nestedatt--health_check"></a>
### Nested Schema for `health_check`

Optional:

- `domain` (String) 健康检查的域名，需配置为后端服务器上真实对外提供服务的地址。只有 HealthCheck.Protocol 设置为 HTTP 时该参数生效。需至少包含一个‘.’，且不允许以‘.’开头或结尾。域名每一级由字母、数字、‘-’、‘.’字符组成，且‘-’不得出现在每一级的头部或尾部。长度限制为1 ～ 128个字符。不传入该参数或该参数不传入数值时，默认为空，表示负载均衡使用各后端服务器的私网IP地址进行健康检查。
- `enabled` (String) 监听器是否开启健康检查功能。取值：on：开启（默认值）。off：不开启。
- `healthy_threshold` (Number) 健康检查的健康阈值。表示连续执行指定次数的健康检查，结果均为正常的后端服务器将判定为健康检查正常。单位：次，取值：2~10，默认值为 3。
- `http_code` (String) 健康检查正常的HTTP状态码，多个状态码间用半角逗号分隔。只有 HealthCheck.Protocol 为 HTTP 时才存在该参数。取值如下：http_2xx（默认值）。http_3xx（默认值）。http_4xx 。http_5xx 。
- `http_version` (String) 健康检查HTTP协议版本，只有 HealthCheck.Protocol 为 HTTP 时才存在该参数。取值：HTTP1.0（使用API时，HTTP协议版本默认值）。HTTP1.1。
- `interval` (Number) 开启健康检查后，执行健康检查的时间间隔。 单位：秒，取值：1~300s，默认值为 2。
- `method` (String) 开启健康检查后，健康检查的方法。只有 HealthCheck.Protocol 设置为 HTTP 时该参数生效。取值如下：GET：服务器需支持GET方法。HEAD（默认）：服务器仅返回HEAD头部信息，可以降低后端性能消耗，但服务器需要支持HEAD方法。
- `port` (Number) 健康检查端口。支持取值：0（默认值）：使用后端服务器端口进行健康检查。1-65535：使用您指定的端口进行健康检查。
- `protocol` (String) 健康检查协议，当前支持HTTP、TCP。默认值为 HTTP。
- `timeout` (Number) 健康检查的响应超时时间。表示如果后端服务器在指定的时间内没有正确响应，则判定为健康检查异常。单位：秒，取值：1~60，默认值为 2。
- `unhealthy_threshold` (Number) 健康检查的不健康阈值。表示连续执行指定次数的健康检查，结果均为异常的后端服务器将判定为健康检查异常。单位：次，取值：2~10，默认值为 3。
- `uri` (String) 健康检查的路径，需配置为后端服务器上真实对外提供的路径。只有 HealthCheck.Protocol 设置为 HTTP 时该参数生效。必须以字符‘/’开头。仅包含字母、数字、‘-’、‘_’、‘/’、‘.’、‘%’、‘?’、‘#’、‘&’、‘＝’ 字符。长度限制为1 ～ 128个字符。不传入该参数或该参数不传入数值时，默认为“/”。


<a id="nestedatt--servers"></a>
### Nested Schema for `servers`

Optional:

- `description` (String) 后端服务器的描述。
- `instance_id` (String) 云服务器实例或网卡的ID。
- `ip` (String) 后端服务器的私网IP地址。
- `port` (Number) 后端服务器接收请求的端口号。
- `remote_enabled` (String) 是否开启远端IP功能。当后端服务器实例类型为IP地址，即 Type 取值为 ip 时，此字段有效。取值：on：开启。off（默认值）：不开启。
- `server_id` (String) 后端服务器ID。
- `type` (String) 后端服务器实例类型。ecs：云服务器实例。eni：辅助网卡。ip：IP地址（仅 Ip 类型服务器组有效）。
- `weight` (Number) 后端服务器的权重。


<a id="nestedatt--sticky_session_config"></a>
### Nested Schema for `sticky_session_config`

Optional:

- `cookie` (String) 服务配置的会话保持 Cookie 名称。仅在开启会话保持功能并选择重写 Cookie 时有效。 具体规则如下：Cookie 名称长度为1~200个字符。名称只能包含 ASCII 英文字母和数字字符，不能包含半角逗号（,）、半角分号（;）或空格，也不能以美元符号（$）开头。当 tickySessionConfig.StickySessionEnabled 值为 on，且 StickySessionConfig.StickySessionType 为 server时，此参数必填。当 StickySessionConfig.StickySessionEnabled 值为 on，且 StickySessionConfig.StickySessionType 为 insert 时，该参数无效。
- `cookie_timeout` (Number) 会话保持 Cookie 超时时间。仅在开启会话保持功能并选择植入 Cookie 时有效。 单位：秒。具体规则如下：超时时间的取值范围：1～86400。 默认值为：1000。当 StickySessionConfig.StickySessionEnabled 值为 on，且 StickySessionConfig.StickySessionType 为 insert 时，此参数必填。当 StickySessionConfig.StickySessionEnabled 值为 on，且 StickySessionType 为 server 时，此参数无效。
- `sticky_session_enabled` (String) 是否开启会话保持功能。on：开启；off（默认值）：关闭。
- `sticky_session_type` (String) 对 Cookie 的处理方式。当 StickySessionConfig.StickySessionEnabled 值为 on 时，此字段参数必填。取值如下：insert：植入 Cookie；ALB 会记录客户端请求第一次转发到的后端服务器。ALB 在返回请求中植入 Cookie ，后续客户端请求携带此 Cookie，ALB 会将请求转发到之前记录的后端服务器上。server：重写 Cookie；开启重写 Cookie 的会话保持后，在客户端请求第一次转发到后端服务器后，ALB 在返回请求中发现您自定义的 Cookie 时，会对原来的 Cookie 进行重写。后续客户端请求携带改写后的 Cookie，ALB 会将请求转发到之前记录的后端服务器上。


<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String) 标签的标签键。同一资源的标签键不允许重复。
- `value` (String) 标签的标签值。


<a id="nestedatt--listeners"></a>
### Nested Schema for `listeners`

Read-Only:

- `listener_id` (String) 监听器的ID。

## Import

Import is supported using the following syntax:

```shell
$ terraform import volcenginecc_alb_server_group.example "server_group_id"
```