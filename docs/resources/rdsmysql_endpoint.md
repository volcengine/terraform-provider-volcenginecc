---
page_title: "volcenginecc_rdsmysql_endpoint Resource - terraform-provider-volcenginecc"
subcategory: ""
description: |-
  连接终端是云数据库 MySQL 版提供的位于数据库和应用程序之间的网络代理服务。根据连接终端的功能差异，连接终端可以分为代理终端和直连终端两种类型。通过代理终端的连接将经过代理，可使用代理相关的特性和功能，如读写分离、负载均衡、空闲连接回收和 Multi-Statements 等；通过直连终端的连接将直连到对应节点，不能使用代理相关特性。
---

# volcenginecc_rdsmysql_endpoint (Resource)

连接终端是云数据库 MySQL 版提供的位于数据库和应用程序之间的网络代理服务。根据连接终端的功能差异，连接终端可以分为代理终端和直连终端两种类型。通过代理终端的连接将经过代理，可使用代理相关的特性和功能，如读写分离、负载均衡、空闲连接回收和 Multi-Statements 等；通过直连终端的连接将直连到对应节点，不能使用代理相关特性。

## Example Usage

```terraform
resource "volcenginecc_rdsmysql_endpoint" "RdsMysqlEndpointDemo" {
  auto_add_new_nodes               = false
  connection_mode                  = "Proxy"
  connection_pool_type             = "Transaction"
  description                      = "this is a description"
  enable_connection_persistent     = true
  endpoint_name                    = "ccapi-test-1"
  endpoint_type                    = "Custom"
  idle_connection_reclaim          = true
  implicit_trans_split             = true
  instance_id                      = "mysql-2e229xxxxxd5"
  master_node_routing              = false
  master_protector_timeout         = 60
  multi_statements_mode            = "Strict"
  nodes                            = "Primary,mysql-2e229xxxxxdd5-r442d,mysql-2e2xxxxxdd5-r8d0f"
  overload_protection              = true
  read_only_node_distribution_type = "RoundRobinCustom"
  read_only_node_max_delay_time    = 30
  read_only_node_weights = [
    {
      node_id   = ""
      node_type = "Primary"
    weight = 100 },
    {
      node_id   = "mysql-2e2xxxxx4dd5-r442d"
      node_type = "ReadOnly"
    weight = 200 },
    {
      node_id   = "mysql-2e22xxxxxdd5-r8d0f"
      node_type = "ReadOnly"
    weight = 300 }
  ]
  read_write_mode     = "ReadWrite"
  read_write_spliting = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `addresses` (Attributes Set) 终端节点地址列表。
 特别提示: 在使用 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--addresses))
- `auto_add_new_nodes` (Boolean) 当终端类型为读写终端或只读终端时，支持设置新节点是否自动加入。取值：true：自动加入。false：不自动加入（默认）。
- `connect_all_slave_nodes` (Boolean) 是否关联所有的备节点。取值：true：是。默认值。false：否。说明仅多节点实例的只读终端支持该配置。仅在实例有两个或更多备节点时才能关闭此功能。
- `connection_mode` (String) 连接终端类型。取值：Proxy：代理终端。Direct：直连终端。说明如实例的数据库代理功能已开启，可以取值为 Proxy 或 Direct。如实例的数据库代理功能未开启，仅可以取值为 Direct。可调用 DescribeDBInstanceDetail 接口查询实例数据库代理功能的开启状态。
- `connection_pool_type` (String) 代理终端的连接池类型。取值：Transaction：事务级连接池。默认值。Direct：直连模式。说明单节点实例不支持该功能。
- `description` (String) 备注。
- `enable_connection_persistent` (Boolean) 是否开启连接终端的连接保持功能。取值：true：是。false：否。说明仅代理终端支持该设置。
- `endpoint_name` (String) 实例连接终端名称。
- `endpoint_type` (String) 终端类型。取值为 Custom，自定义终端。
- `idle_connection_reclaim` (Boolean) 空闲连接回收功能是否开启。true：开启。false：不开启。说明仅代理终端会返回该字段。
- `implicit_trans_split` (Boolean) 是否开启事务分离。取值：true：是。false：否。说明仅代理终端会返回该字段。
- `instance_id` (String) 实例 ID。
- `master_node_routing` (Boolean) 是否开启主节点路由。取值：true：是。false：否。说明仅代理终端会返回该字段。
- `master_protector_timeout` (Number) 过载保护超时时间。取值范围为 60~7200 之间的整数，单位为秒。说明仅代理终端会返回该字段。
- `multi_statements_mode` (String) 代理终端的 Multi-Statements 模式。取值：Strict：Strict 模式。默认值。Loose：Loose 模式。
- `nodes` (String) 连接终端配置的节点 ID 列表。当 EndpointType 为 Custom 时必选。说明如需将主节点加入终端，不需填写主节点 ID，只需填写 Primary。多个节点 ID 之间用英文逗号（,）分隔。
- `overload_protection` (Boolean) 是否开启过载保护。取值：true：是。false：否。说明仅代理终端会返回该字段。
- `read_only_node_distribution_type` (String) 读权重分配模式。当开通读写分离设置为 true 时需要传入此参数。在 CreateDBEndpoint 和 ModifyDBEndpoint 接口中做请求参数时，取值范围如下：LoadSchedule：负载调度。RoundRobinCustom：自定义权重的轮询调度。RoundRobinAuto：自动分配权重的轮询调度。在 DescribeDBInstanceDetail 接口中做返回参数时，取值范围如下：Default：按规格权重自动分配。Custom：自定义分配权重。RoundRobin：轮询调度。LoadSchedule：负载调度。RoundRobinCustom：自定义权重的轮询调度。RoundRobinAuto：自动分配权重的轮询调度。
- `read_only_node_max_delay_time` (Number) 只读节点延迟阈值。取值范围为 1~3600，默认为 30，单位为秒。
- `read_only_node_weights` (Attributes Set) 连接终端配置的节点列表及对应的只读权重。
 特别提示: 在使用 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--read_only_node_weights))
- `read_write_mode` (String) 读写模式：ReadWrite：读写。ReadOnly：只读。
- `read_write_spliting` (Boolean) 是否开启读写分离。取值：true：是。默认值。false：否。

### Read-Only

- `connection_info_tags` (Set of String) 连接终端标签。
- `custom_route_strategy` (Attributes) 连接终端的 SQL 转发规则。 (see [below for nested schema](#nestedatt--custom_route_strategy))
- `enable_read_only` (String) 是否已开启全局只读，取值：Enable：开启。Disable：未开启。
- `endpoint_id` (String) 实例连接终端 ID。
- `id` (String) Uniquely identifies the resource.

<a id="nestedatt--addresses"></a>
### Nested Schema for `addresses`

Optional:

- `dns_visibility` (Boolean) false：火山引擎私网解析（默认）。true：火山引擎私网以及公网解析。
- `domain_prefix` (String) 连接地址前缀。连接地址的前缀需满足以下规则：以小写字母开头，以小写字母或数字结尾。由小写字母、数字和中划线（-）中的至少两种组成。连接地址前缀应至少包含 8 个字符，连接地址总长度（前缀+后缀）不得超过 63个字符。
- `port` (String) 端口。


<a id="nestedatt--read_only_node_weights"></a>
### Nested Schema for `read_only_node_weights`

Optional:

- `node_id` (String) 只读节点需要传入 NodeId，主节点无需传入。
- `node_type` (String) 节点类型。Primary：主节点。ReadOnly：只读节点。
- `weight` (Number) 节点的读权重，以 100 递增，最大值为 10000。说明权重不可全部设置为 0。


<a id="nestedatt--custom_route_strategy"></a>
### Nested Schema for `custom_route_strategy`

Read-Only:

- `keyword_route_strategy` (Attributes Set) 自定义路由策略列表。
 特别提示: 在使用 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--custom_route_strategy--keyword_route_strategy))

<a id="nestedatt--custom_route_strategy--keyword_route_strategy"></a>
### Nested Schema for `custom_route_strategy.keyword_route_strategy`

Read-Only:

- `node_type` (String) SQL 转发规则的转发目标。取值：Primary：主节点。Secondary：备节点。ReadOnly：只读节点。说明如实例为双节点实例，可选择主节点或只读节点。如实例为多节点实例，可选择主节点或备节点。
- `sql_keyword` (String) 转发规则的关键字。SQL 关键字的设置规则如下：单个规则最多可包含 20 个关键字。最大长度为 64 个字符，可包含英文字母、数字、下划线 _、@、#、:= 和中文字符。

## Import

Import is supported using the following syntax:

```shell
$ terraform import volcenginecc_rdsmysql_endpoint.example "instance_id|endpoint_id"
```