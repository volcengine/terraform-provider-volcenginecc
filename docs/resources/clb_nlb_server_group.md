---
page_title: "volcenginecc_clb_nlb_server_group Resource - terraform-provider-volcenginecc"
subcategory: ""
description: |-
  服务器组
---

# volcenginecc_clb_nlb_server_group (Resource)

服务器组

## Example Usage

```terraform
resource "volcenginecc_clb_nlb_server_group" "NLBServerGroupDemo" {
  bypass_security_group_enabled = false
  health_check = {
    enabled = false
  }
  vpc_id                      = "vpc-13f8k4dwdsydc3n6nu5rxxxxx"
  project_name                = "default"
  server_group_name           = "NLBServerGroupDemo.Aa1xxxxx"
  type                        = "instance"
  protocol                    = "UDP"
  description                 = "test.IPV4.UDP.WLC_="
  scheduler                   = "wlc"
  ip_address_version          = "ipv4"
  any_port_enabled            = false
  connection_drain_enabled    = false
  preserve_client_ip_enabled  = false
  session_persistence_enabled = false
  proxy_protocol_type         = "off"
  servers = [
    {
      instance_id = "i-ye2fvd0qo0bw80ctxxxxx"
      type        = "ecs"
      ip          = "192.168.xx.76"
      port        = 10
    weight = 50 },
    {
      instance_id = "eni-mirt64nt1xq85smt1a3xxxxx"
      type        = "eni"
      ip          = "192.168.xx.77"
      port        = 20
    weight = 50 }
  ]
  tags = [
    {
      key = "env"
    value = "test" }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `protocol` (String) NLB转发流量到后端服务器时使用的通信协议
- `vpc_id` (String) 服务器组所属私有网络的ID。

### Optional

- `account_id` (String) 账号ID
- `any_port_enabled` (Boolean) 是否开启全端口转发
- `bypass_security_group_enabled` (Boolean) 是否开启放通后端安全组功能。仅参数Type为“instance”时，可以配置此参数
- `connection_drain_enabled` (Boolean) 是否开启连接优雅中断
- `connection_drain_timeout` (Number) 连接优雅中断超时时间，取值范围为0～900秒。参数ConnectionDrainEnabled为“true”时，该参数为必填。
- `created_time` (String) 后端服务器组的创建时间
- `description` (String) 后端服务器组的描述,服务器组的描述。必须以字母、数字或中文开头，可包含以下特殊字符：英文逗号（,）、点号（.）、下划线（_）、空格（ ）、等号（=）、中划线（-）、中文逗号（，）、中文句号（。）长度限制为0 ～ 255个字符。该参数不传入，则默认为空字符串。
- `health_check` (Attributes) 健康检查相关参数 (see [below for nested schema](#nestedatt--health_check))
- `ip_address_version` (String) 服务器组的IP地址类型
- `preserve_client_ip_enabled` (Boolean) 是否开启源地址保持
- `project_name` (String) 项目名称
- `proxy_protocol_type` (String) 是否开启Proxy-Protocol协议
- `scheduler` (String) NLB转发流量时遵循的规则
- `server_group_name` (String) 服务器组名称, 必须以字母、数字或中文开头，可包含以下特殊字符：点号（.）、下划线（_）和中划线（-）。限制为1 ～ 128个字符。该参数不传入，则默认为服务器组ID。
- `servers` (Attributes Set) 服务器组中待添加后端服务器的信息
 特别提示: 在使用 ListNestedAttribute 或 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--servers))
- `session_persistence_enabled` (Boolean) 是否开启会话保持
- `session_persistence_timeout` (Number) 会话保持的超时时间，取值范围为1～3600秒，默认1000秒
- `tags` (Attributes Set) 标签
 特别提示: 在使用 ListNestedAttribute 或 SetNestedAttribute 时，必须完整定义其嵌套结构体的所有属性。若定义不完整，Terraform 在执行计划对比时可能会检测到意料之外的差异，从而触发不必要的资源更新，影响资源的稳定性与可预测性。 (see [below for nested schema](#nestedatt--tags))
- `timestamp_remove_enabled` (Boolean) 是否开启清除TCP/HTTP/HTTPS报文的timestamp（即时间戳）的功能
- `type` (String) 服务器组的类型
- `updated_time` (String) 后端服务器组的更新时间

### Read-Only

- `id` (String) Uniquely identifies the resource.
- `related_load_balancer_ids` (Set of String) 服务器组关联的NLB实例
- `server_count` (Number) 服务器组中后端服务器的数量
- `server_group_id` (String) 服务器组ID
- `status` (String) 服务器组的状态

<a id="nestedatt--health_check"></a>
### Nested Schema for `health_check`

Optional:

- `domain` (String) 健康检查的域名
- `enabled` (Boolean) 是否开启健康检查
- `healthy_threshold` (Number) 健康检查的健康阈值，取值范围为2 ～ 10次，默认值为3次。连续执行指定次数的健康检查，结果均为“正常”的后端服务器将被判定为健康检查“正常”。
- `http_code` (String) 健康检查正常的HTTP状态码
- `interval` (Number) 健康检查的时间间隔，取值范围为1 ～ 300秒，默认值为10秒。
- `method` (String) 健康检查的请求方法
- `port` (Number) 健康检查的端口，取值范围 1～65535。服务器组未开启全端口转发时，该参数默认为0，表示使用后端服务器的端口进行健康检查。服务器组开启全端口转发时，必须指定该参数。
- `timeout` (Number) 健康检查的响应超时时间，取值范围为1 ～ 60秒，默认值为3秒。如果后端服务器在指定时间内没有正确响应，则判定为健康检查“异常”。
- `type` (String) 健康检查的协议类型
- `udp_expect` (String) UDP健康检查的请求字符串。只允许包含字母和数字，最大长度限制为64个字符。
- `udp_request` (String) UDP健康检查的预期响应字符串
- `unhealthy_threshold` (Number) 健康检查的不健康阈值，取值范围为2 ～ 10次，默认值为3次。连续执行指定次数的健康检查，结果均为“异常”的后端服务器将被判定为健康检查异常。
- `uri` (String) 健康检查的路径


<a id="nestedatt--servers"></a>
### Nested Schema for `servers`

Optional:

- `description` (String) 后端服务器的描述，默认值为空字符串
- `instance_id` (String) 服务器实例的ID或IP地址。服务器类型为“ecs”时，传入云服务器实例的ID。您可以调用DescribeInstances接口云服务器实例ID。服务器类型为“eni”时，传入已绑定云服务器实例的网卡ID。您可以调用DescribeNetworkInterfaces接口获取网卡ID。服务器类型为“ip”时，传入后端服务器的IP地址。
- `ip` (String) 后端服务器的私网IP地址。您可以调用DescribeInstances接口获取“ecs”类型后端服务器的私网IP地址。您可以调用DescribeNetworkInterfaces接口获取“eni”类型后端服务器的私网IP地址。
- `port` (Number) 后端服务器接收请求的端口号，取值范围为 1～65535。参数AnyPortEnabled为“false”，即服务器组未开启全端口转发时，该参数为必填。参数AnyPortEnabled为“true”，即服务器组开启全端口转发时，该参数默认为0。
- `server_id` (String) 后端服务器 ID
- `type` (String) 后端服务器的类型
- `weight` (Number) 后端服务器的权重，取值范围为0 ～ 100。权重为0，表示不会将请求转发给该服务器。该参数不传入，则默认为0
- `zone_id` (String) 指定后端服务器关联的NLB实例可用区。当参数Servers.N.Type为ip时，此参数必填。NLB实例开启跨可用区转发功能时，该后端服务器可以接收来自NLB实例所有可用区的流量。NLB实例关闭跨可用区转发功能时，则该后端服务器仅接收来自指定可用区的流量。


<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String) 标签键
- `value` (String) 标签值

## Import

Import is supported using the following syntax:

```shell
$ terraform import volcenginecc_clb_nlb_server_group.example "server_group_id"
```